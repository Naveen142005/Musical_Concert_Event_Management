<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thigalzhi® - Premium Concert Booking System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(107, 114, 128, 0.2);
        }
        .form-input {
            transition: all 0.3s ease;
            background: linear-gradient(145deg, #dbeafe, #e0f2fe);
            border: 2px solid #10b981;
        }
        .form-input:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            outline: none;
        }
        .form-input.error {
            border-color: #ef4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }
        .form-input.success {
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        .step-content {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .calendar-day {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .calendar-day:hover {
            transform: scale(1.1);
        }
        .available {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            color: #166534;
            border: 2px solid #16a34a;
        }
        .unavailable {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            color: #991b1b;
            border: 2px solid #dc2626;
            cursor: pointer;
        }
        .partially-available {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            color: #92400e;
            border: 2px solid #f59e0b;
            cursor: pointer;
        }
        .selected {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            border: 2px solid #6d28d9;
        }
        .modal {
            backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease-out;
        }
        .modal-content {
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .ticket-card {
            transition: all 0.3s ease;
        }
        .ticket-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .searchable-dropdown {
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
        }
        .venue-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .venue-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        .venue-card.selected {
            border-color: #8b5cf6;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
        }
        .quantity-btn {
            transition: all 0.2s ease;
        }
        .quantity-btn:hover {
            transform: scale(1.1);
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
        .error-message {
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        .success-message {
            font-size: 0.875rem;
            margin-top: 0.25rem;
            color: #059669;
        }
        .filter-section {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 2px solid #3b82f6;
        }
        .summary-card-blue {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 2px solid #3b82f6;
        }
        .summary-card-purple {
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
            border: 2px solid #8b5cf6;
        }
        .summary-card-green {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border: 2px solid #16a34a;
        }
        .summary-card-orange {
            background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%);
            border: 2px solid #ea580c;
        }
        .ticket-info-card {
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
            border: 2px solid #8b5cf6;
        }
        .investment-card {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border: 2px solid #16a34a;
        }
        .concert-header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        }
        .pagination-btn {
            transition: all 0.2s ease;
        }
        .pagination-btn:hover {
            transform: scale(1.05);
        }
        .pagination-btn.active {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
        }
        .food-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
        }
        
        /* SVG Icons Animation */
        .icon-spin {
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .icon-bounce {
            animation: bounce 1s ease-in-out infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .icon-pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <div class="text-center py-8 bg-gradient-to-r from-purple-600 to-indigo-600 text-white">
        <h1 class="text-4xl font-bold mb-2">Thigalzhi®</h1>
        <p class="text-xl opacity-90">Premium Concert Booking System</p>
    </div>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Main Content -->
            <div class="lg:col-span-3">
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    
                    <!-- Step 1: Personal Information -->
                    <div id="step-1" class="step-content p-8">
                        <h2 class="text-3xl font-bold text-gray-800 mb-8">Personal Information</h2>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Name <span class="text-red-500">*</span>
                                </label>
                                <input type="text" id="userName" required 
                                       class="form-input w-full px-4 py-3 rounded-xl"
                                       placeholder="Naveen kumar" 
                                       onblur="validateField('userName')"
                                       oninput="realTimeValidation('userName')">
                                <div id="userName-error" class="error-message text-red-500 hidden"></div>
                                <div id="userName-success" class="success-message hidden">✓ Name looks good!</div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    E-MAIL <span class="text-red-500">*</span>
                                </label>
                                <input type="email" id="userEmail" required 
                                       class="form-input w-full px-4 py-3 rounded-xl"
                                       placeholder="valarmathi@gmail.com"
                                       onblur="validateField('userEmail')"
                                       oninput="realTimeValidation('userEmail')">
                                <div id="userEmail-error" class="error-message text-red-500 hidden"></div>
                                <div id="userEmail-success" class="success-message hidden">✓ Email is valid!</div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Mobile <span class="text-red-500">*</span>
                                </label>
                                <input type="tel" id="userPhone" required 
                                       class="form-input w-full px-4 py-3 rounded-xl"
                                       placeholder="9134983493"
                                       onblur="validateField('userPhone')"
                                       oninput="realTimeValidation('userPhone')">
                                <div id="userPhone-error" class="error-message text-red-500 hidden"></div>
                                <div id="userPhone-success" class="success-message hidden">✓ Phone number is valid!</div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Event Name <span class="text-red-500">*</span>
                                </label>
                                <input type="text" id="eventName" required 
                                       class="form-input w-full px-4 py-3 rounded-xl"
                                       placeholder="Hello"
                                       onblur="validateField('eventName')"
                                       oninput="realTimeValidation('eventName')">
                                <div id="eventName-error" class="error-message text-red-500 hidden"></div>
                                <div id="eventName-success" class="success-message hidden">✓ Event name set!</div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center">
                                        <svg class="w-5 h-5 text-purple-600 mr-2 icon-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Event Start Date & Time <span class="text-red-500">*</span>
                                    </label>
                                    <input type="datetime-local" id="startDateTime" required 
                                           class="form-input w-full px-4 py-3 rounded-xl"
                                           onblur="validateField('startDateTime')"
                                           onchange="validateDateTimes()">
                                    <div id="startDateTime-error" class="error-message text-red-500 hidden"></div>
                                    <div id="startDateTime-success" class="success-message hidden">✓ Start time set!</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2 flex items-center">
                                        <svg class="w-5 h-5 text-purple-600 mr-2 icon-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                        </svg>
                                        Event End Date & Time <span class="text-red-500">*</span>
                                    </label>
                                    <input type="datetime-local" id="endDateTime" required 
                                           class="form-input w-full px-4 py-3 rounded-xl"
                                           onblur="validateField('endDateTime')"
                                           onchange="validateDateTimes()">
                                    <div id="endDateTime-error" class="error-message text-red-500 hidden"></div>
                                    <div id="endDateTime-success" class="success-message hidden">✓ End time set!</div>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end mt-8">
                            <button type="button" onclick="nextStep()" id="step1-next" class="btn-primary text-white px-8 py-4 rounded-xl font-semibold text-lg flex items-center" disabled>
                                <span class="mr-2">NEXT STEP</span>
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Step 2: Event Essentials -->
                    <div id="step-2" class="step-content p-8 hidden">
                        <h2 class="text-3xl font-bold text-gray-800 mb-8">Event Essentials</h2>
                        
                        <div class="space-y-8">
                            <!-- Do you need venue -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">
                                    Do you need venue? <span class="text-red-500">*</span>
                                </label>
                                <div class="bg-green-50 border-2 border-green-400 rounded-xl p-4 flex items-center">
                                    <svg class="w-5 h-5 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                    </svg>
                                    <span class="text-green-800 font-medium">Yes</span>
                                </div>
                            </div>

                            <!-- Food Count Section -->
                            <div class="food-section rounded-xl p-6">
                                <h3 class="text-lg font-bold text-yellow-800 mb-4 flex items-center">
                                    <svg class="w-6 h-6 text-yellow-600 mr-2 icon-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                    Food & Catering Requirements
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-yellow-700 mb-2">Expected Number of People</label>
                                        <input type="number" id="foodCount" min="0" max="50000" 
                                               class="w-full px-4 py-2 bg-white border border-yellow-300 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200"
                                               placeholder="Enter number of people"
                                               oninput="updateFoodCount()"
                                               onchange="filterByCapacity()">
                                        <div class="text-sm text-yellow-700 mt-1">This will help filter suitable venues and services</div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-yellow-700 mb-2">Meal Type</label>
                                        <select id="mealType" class="w-full px-4 py-2 bg-white border border-yellow-300 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200" onchange="filterByCapacity()">
                                            <option value="">Select meal type</option>
                                            <option value="snacks">Light Snacks</option>
                                            <option value="lunch">Lunch</option>
                                            <option value="dinner">Dinner</option>
                                            <option value="buffet">Full Buffet</option>
                                        </select>
                                    </div>
                                </div>
                                <div id="foodCountDisplay" class="mt-4 p-3 bg-white rounded-lg border border-yellow-300 hidden">
                                    <div class="text-yellow-800 font-semibold">Food Planning Summary:</div>
                                    <div id="foodSummary" class="text-yellow-700 text-sm mt-1"></div>
                                </div>
                            </div>

                            <!-- Filter Venues -->
                            <div class="filter-section rounded-xl p-6">
                                <h3 class="text-lg font-bold text-blue-800 mb-4 flex items-center">
                                    <svg class="w-6 h-6 text-blue-600 mr-2 icon-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
                                    </svg>
                                    Filter Venues
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-blue-700 mb-2">Max Capacity</label>
                                        <select id="capacityFilter" class="w-full px-4 py-2 bg-white border border-blue-300 rounded-lg" onchange="filterVenues()">
                                            <option value="">Any capacity</option>
                                            <option value="1000">Up to 1,000</option>
                                            <option value="5000">Up to 5,000</option>
                                            <option value="10000">Up to 10,000</option>
                                            <option value="20000">Up to 20,000</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-blue-700 mb-2">Location</label>
                                        <select id="locationFilter" class="w-full px-4 py-2 bg-white border border-blue-300 rounded-lg" onchange="filterVenues()">
                                            <option value="">Any location</option>
                                            <option value="New York">New York</option>
                                            <option value="Los Angeles">Los Angeles</option>
                                            <option value="Chicago">Chicago</option>
                                            <option value="Miami">Miami</option>
                                            <option value="Colorado">Colorado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Choose Available Venue with Pagination -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                                    <svg class="w-5 h-5 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                                    </svg>
                                    Choose Available Venue <span class="text-red-500">*</span>
                                </label>
                                <div id="venuesList" class="space-y-4">
                                    <!-- Venues will be populated here -->
                                </div>
                                <div id="venuePagination" class="flex justify-center items-center space-x-2 mt-4 hidden">
                                    <button onclick="changeVenuePage(-1)" class="pagination-btn px-3 py-1 bg-gray-200 rounded-lg text-gray-700 hover:bg-purple-200">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                        </svg>
                                    </button>
                                    <div id="venuePageNumbers" class="flex space-x-1">
                                        <!-- Page numbers will be populated here -->
                                    </div>
                                    <button onclick="changeVenuePage(1)" class="pagination-btn px-3 py-1 bg-gray-200 rounded-lg text-gray-700 hover:bg-purple-200">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="venue-error" class="error-message text-red-500 hidden mt-2">Please select a venue</div>
                            </div>

                            <!-- Band Selection with Pagination -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                                    <svg class="w-5 h-5 text-purple-600 mr-2 icon-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                                    </svg>
                                    Select Band <span class="text-red-500">*</span>
                                </label>
                                <div class="relative mb-4">
                                    <input type="text" id="bandSearch" placeholder="Search bands..." 
                                           class="form-input w-full px-4 py-3 rounded-xl"
                                           oninput="filterBands(this.value)">
                                    <svg class="w-5 h-5 text-gray-400 absolute right-3 top-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                    </svg>
                                </div>
                                <div id="bandsList" class="space-y-4">
                                    <!-- Bands will be populated here -->
                                </div>
                                <div id="bandPagination" class="flex justify-center items-center space-x-2 mt-4 hidden">
                                    <button onclick="changeBandPage(-1)" class="pagination-btn px-3 py-1 bg-gray-200 rounded-lg text-gray-700 hover:bg-purple-200">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                        </svg>
                                    </button>
                                    <div id="bandPageNumbers" class="flex space-x-1">
                                        <!-- Page numbers will be populated here -->
                                    </div>
                                    <button onclick="changeBandPage(1)" class="pagination-btn px-3 py-1 bg-gray-200 rounded-lg text-gray-700 hover:bg-purple-200">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div id="band-error" class="error-message text-red-500 hidden mt-2">Please select a band</div>
                            </div>

                            <!-- Decoration Selection with Pagination -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center">
                                    <svg class="w-5 h-5 text-purple-600 mr-2 icon-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4 4 4 0 004-4V5z"></path>
                                    </svg>
                                    Select Decorations (Optional)
                                </label>
                                <div class="relative mb-4">
                                    <input type="text" id="decorSearch" placeholder="Search decorations..." 
                                           class="form-input w-full px-4 py-3 rounded-xl"
                                           oninput="filterDecorations(this.value)">
                                    <svg class="w-5 h-5 text-gray-400 absolute right-3 top-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                    </svg>
                                </div>
                                <div id="decorationsList" class="space-y-4">
                                    <!-- Decorations will be populated here -->
                                </div>
                                <div id="decorationPagination" class="flex justify-center items-center space-x-2 mt-4 hidden">
                                    <button onclick="changeDecorationPage(-1)" class="pagination-btn px-3 py-1 bg-gray-200 rounded-lg text-gray-700 hover:bg-purple-200">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                        </svg>
                                    </button>
                                    <div id="decorationPageNumbers" class="flex space-x-1">
                                        <!-- Page numbers will be populated here -->
                                    </div>
                                    <button onclick="changeDecorationPage(1)" class="pagination-btn px-3 py-1 bg-gray-200 rounded-lg text-gray-700 hover:bg-purple-200">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Snacks & Beverages -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-4">Snacks & Beverages</label>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="bg-gray-50 rounded-xl p-4">
                                        <h4 class="font-medium text-gray-900 mb-2 flex items-center">
                                            <svg class="w-5 h-5 text-orange-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                                            </svg>
                                            Fresh Juice
                                        </h4>
                                        <div class="flex items-center justify-center space-x-3">
                                            <button type="button" class="quantity-btn w-8 h-8 bg-purple-600 text-white rounded-full hover:bg-purple-700" onclick="updateQuantity('juice', -1)">-</button>
                                            <span id="juice-qty" class="w-12 text-center font-medium text-lg">0</span>
                                            <button type="button" class="quantity-btn w-8 h-8 bg-purple-600 text-white rounded-full hover:bg-purple-700" onclick="updateQuantity('juice', 1)">+</button>
                                        </div>
                                        <div class="text-center text-sm text-gray-600 mt-2">₹50 each</div>
                                    </div>
                                    <div class="bg-gray-50 rounded-xl p-4">
                                        <h4 class="font-medium text-gray-900 mb-2 flex items-center">
                                            <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                                            </svg>
                                            Soft Drinks
                                        </h4>
                                        <div class="flex items-center justify-center space-x-3">
                                            <button type="button" class="quantity-btn w-8 h-8 bg-purple-600 text-white rounded-full hover:bg-purple-700" onclick="updateQuantity('softdrinks', -1)">-</button>
                                            <span id="softdrinks-qty" class="w-12 text-center font-medium text-lg">0</span>
                                            <button type="button" class="quantity-btn w-8 h-8 bg-purple-600 text-white rounded-full hover:bg-purple-700" onclick="updateQuantity('softdrinks', 1)">+</button>
                                        </div>
                                        <div class="text-center text-sm text-gray-600 mt-2">₹30 each</div>
                                    </div>
                                    <div class="bg-gray-50 rounded-xl p-4">
                                        <h4 class="font-medium text-gray-900 mb-2 flex items-center">
                                            <svg class="w-5 h-5 text-yellow-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                                            </svg>
                                            Snacks
                                        </h4>
                                        <div class="flex items-center justify-center space-x-3">
                                            <button type="button" class="quantity-btn w-8 h-8 bg-purple-600 text-white rounded-full hover:bg-purple-700" onclick="updateQuantity('snacks', -1)">-</button>
                                            <span id="snacks-qty" class="w-12 text-center font-medium text-lg">0</span>
                                            <button type="button" class="quantity-btn w-8 h-8 bg-purple-600 text-white rounded-full hover:bg-purple-700" onclick="updateQuantity('snacks', 1)">+</button>
                                        </div>
                                        <div class="text-center text-sm text-gray-600 mt-2">₹25 each</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-between mt-8">
                            <button type="button" onclick="prevStep()" class="btn-secondary text-white px-8 py-4 rounded-xl font-semibold flex items-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path>
                                </svg>
                                Previous
                            </button>
                            <button type="button" onclick="nextStep()" id="step2-next" class="btn-primary text-white px-8 py-4 rounded-xl font-semibold flex items-center" disabled>
                                Continue
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Step 3: Availability Calendar -->
                    <div id="step-3" class="step-content p-8 hidden">
                        <h2 class="text-3xl font-bold text-gray-800 mb-8">Select Available Date</h2>
                        
                        <div class="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm">
                            <div class="flex justify-between items-center mb-4">
                                <button type="button" id="prevMonth" class="p-3 hover:bg-gray-100 rounded-full transition-colors flex items-center">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                    </svg>
                                    <span class="ml-1">Previous</span>
                                </button>
                                <h3 id="currentMonth" class="text-xl font-bold text-gray-800"></h3>
                                <button type="button" id="nextMonth" class="p-3 hover:bg-gray-100 rounded-full transition-colors flex items-center">
                                    <span class="mr-1">Next</span>
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Legend -->
                            <div class="flex justify-center items-center space-x-6 mb-4 text-sm">
                                <div class="flex items-center">
                                    <div class="w-4 h-4 available rounded mr-2"></div>
                                    <span>All Services Available</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-4 partially-available rounded mr-2"></div>
                                    <span>Some Services Available</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-4 unavailable rounded mr-2"></div>
                                    <span>No Services Available</span>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-7 gap-1 mb-2">
                                <div class="text-center text-sm font-medium text-gray-500 py-2">Sun</div>
                                <div class="text-center text-sm font-medium text-gray-500 py-2">Mon</div>
                                <div class="text-center text-sm font-medium text-gray-500 py-2">Tue</div>
                                <div class="text-center text-sm font-medium text-gray-500 py-2">Wed</div>
                                <div class="text-center text-sm font-medium text-gray-500 py-2">Thu</div>
                                <div class="text-center text-sm font-medium text-gray-500 py-2">Fri</div>
                                <div class="text-center text-sm font-medium text-gray-500 py-2">Sat</div>
                            </div>
                            <div id="calendarGrid" class="grid grid-cols-7 gap-1">
                                <!-- Calendar days will be populated here -->
                            </div>
                            <div id="selectedDateDisplay" class="mt-4 text-center"></div>
                            <div id="availabilityMessage" class="mt-2 text-center text-sm"></div>
                        </div>

                        <div class="flex justify-between mt-8">
                            <button type="button" onclick="prevStep()" class="btn-secondary text-white px-8 py-4 rounded-xl font-semibold flex items-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path>
                                </svg>
                                Previous
                            </button>
                            <button type="button" onclick="nextStep()" id="step3-next" class="btn-primary text-white px-8 py-4 rounded-xl font-semibold flex items-center" disabled>
                                Continue
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Step 4: Extras & Tickets -->
                    <div id="step-4" class="step-content p-8 hidden">
                        <h2 class="text-3xl font-bold text-gray-800 mb-8">Extras & Tickets</h2>
                        
                        <div class="space-y-8">
                            <!-- Enable ticket booking -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">
                                    Enable ticket booking for your concert?
                                </label>
                                <select id="ticketBookingEnabled" class="form-input w-full px-4 py-3 rounded-xl" onchange="toggleTicketSection()">
                                    <option value="no">No</option>
                                    <option value="yes">Yes</option>
                                </select>
                            </div>

                            <!-- Ticket Quantities & Pricing -->
                            <div id="ticketSection" class="bg-blue-50 border-2 border-blue-300 rounded-xl p-6 hidden">
                                <h3 class="text-xl font-bold text-blue-800 mb-4 flex items-center">
                                    <svg class="w-6 h-6 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                                    </svg>
                                    Ticket Quantities & Pricing
                                </h3>
                                <p class="text-blue-700 mb-6">Enter the number of tickets available for each tier and set their prices.</p>
                                
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <!-- Premium Tickets -->
                                    <div class="bg-white rounded-xl p-6 border-2 border-purple-200 ticket-card">
                                        <h4 class="text-lg font-bold text-purple-700 mb-4 flex items-center">
                                            <svg class="w-5 h-5 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                                            </svg>
                                            Premium Tickets
                                        </h4>
                                        <div class="space-y-4">
                                            <div>
                                                <input type="number" id="premiumCount" placeholder="Number of tickets" 
                                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200" 
                                                       min="0" max="10000"
                                                       oninput="validateTicketField('premium')" 
                                                       onblur="calculateTicketRevenue()">
                                                <div id="premiumCount-error" class="text-red-500 text-sm mt-1 hidden">Please enter a valid number</div>
                                            </div>
                                            <div>
                                                <input type="number" id="premiumPrice" placeholder="Price per ticket (₹)" 
                                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200" 
                                                       min="1"
                                                       oninput="validateTicketField('premium')" 
                                                       onblur="calculateTicketRevenue()">
                                                <div id="premiumPrice-error" class="text-red-500 text-sm mt-1 hidden">Please enter a valid price</div>
                                            </div>
                                            <div class="text-center font-semibold text-purple-700">
                                                Revenue: ₹<span id="premiumRevenue">0</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Gold Tickets -->
                                    <div class="bg-white rounded-xl p-6 border-2 border-yellow-300 ticket-card">
                                        <h4 class="text-lg font-bold text-yellow-700 mb-4 flex items-center">
                                            <svg class="w-5 h-5 text-yellow-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                                            </svg>
                                            Gold Tickets
                                        </h4>
                                        <div class="space-y-4">
                                            <div>
                                                <input type="number" id="goldCount" placeholder="Number of tickets" 
                                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200" 
                                                       min="0" max="10000"
                                                       oninput="validateTicketField('gold')" 
                                                       onblur="calculateTicketRevenue()">
                                                <div id="goldCount-error" class="text-red-500 text-sm mt-1 hidden">Please enter a valid number</div>
                                            </div>
                                            <div>
                                                <input type="number" id="goldPrice" placeholder="Price per ticket (₹)" 
                                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200" 
                                                       min="1"
                                                       oninput="validateTicketField('gold')" 
                                                       onblur="calculateTicketRevenue()">
                                                <div id="goldPrice-error" class="text-red-500 text-sm mt-1 hidden">Please enter a valid price</div>
                                            </div>
                                            <div class="text-center font-semibold text-yellow-700">
                                                Revenue: ₹<span id="goldRevenue">0</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Silver Tickets -->
                                    <div class="bg-white rounded-xl p-6 border-2 border-gray-300 ticket-card">
                                        <h4 class="text-lg font-bold text-gray-700 mb-4 flex items-center">
                                            <svg class="w-5 h-5 text-gray-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                            </svg>
                                            Silver Tickets
                                        </h4>
                                        <div class="space-y-4">
                                            <div>
                                                <input type="number" id="silverCount" placeholder="Number of tickets" 
                                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-500 focus:ring-2 focus:ring-gray-200" 
                                                       min="0" max="10000"
                                                       oninput="validateTicketField('silver')" 
                                                       onblur="calculateTicketRevenue()">
                                                <div id="silverCount-error" class="text-red-500 text-sm mt-1 hidden">Please enter a valid number</div>
                                            </div>
                                            <div>
                                                <input type="number" id="silverPrice" placeholder="Price per ticket (₹)" 
                                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-gray-500 focus:ring-2 focus:ring-gray-200" 
                                                       min="1"
                                                       oninput="validateTicketField('silver')" 
                                                       onblur="calculateTicketRevenue()">
                                                <div id="silverPrice-error" class="text-red-500 text-sm mt-1 hidden">Please enter a valid price</div>
                                            </div>
                                            <div class="text-center font-semibold text-gray-700">
                                                Revenue: ₹<span id="silverRevenue">0</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="ticket-validation-error" class="text-red-500 text-center mt-4 hidden font-semibold">
                                    Please enter at least one ticket type with valid count and price.
                                </div>
                            </div>

                            <!-- Ticket Sale Dates -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    Ticket Sale Start Date & Time
                                </label>
                                <input type="datetime-local" id="ticketSaleStart" 
                                       class="form-input w-full px-4 py-3 rounded-xl">
                                <p class="text-purple-600 text-sm mt-2 flex items-center">
                                    <svg class="w-4 h-4 text-purple-500 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    Note: Ticket sale will automatically close before the event starts.
                                </p>
                            </div>
                        </div>

                        <div class="flex justify-between mt-8">
                            <button type="button" onclick="prevStep()" class="btn-secondary text-white px-8 py-4 rounded-xl font-semibold flex items-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path>
                                </svg>
                                Previous
                            </button>
                            <button type="button" onclick="nextStep()" id="step4-next" class="btn-primary text-white px-8 py-4 rounded-xl font-semibold flex items-center">
                                View Details
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Step 5: Concert Summary -->
                    <div id="step-5" class="step-content p-8 hidden">
                        <!-- Concert Header -->
                        <div class="concert-header rounded-2xl p-8 mb-8 text-white relative overflow-hidden">
                            <div class="absolute top-4 right-4 opacity-20">
                                <svg class="w-16 h-16 icon-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                                </svg>
                            </div>
                            <h2 class="text-3xl font-bold mb-4 flex items-center">
                                <svg class="w-8 h-8 text-white mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 3v10a2 2 0 002 2h8a2 2 0 002-2V7M9 7h6M9 11h6M9 15h6"></path>
                                </svg>
                                Your Stage is Set!
                            </h2>
                            <p class="text-xl opacity-90 flex items-center">
                                <svg class="w-5 h-5 text-white mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                                </svg>
                                Lights are ready, music is about to begin
                            </p>
                            <p class="text-lg opacity-80 flex items-center mt-2">
                                <svg class="w-5 h-5 text-white mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                </svg>
                                Get ready for an unforgettable concert experience!
                            </p>
                        </div>

                        <!-- Concert Booking Summary -->
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <svg class="w-8 h-8 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            Concert Booking Summary
                        </h3>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <!-- Event Information -->
                            <div class="summary-card-blue rounded-xl p-6">
                                <h4 class="text-xl font-bold text-blue-800 mb-4 flex items-center">
                                    <svg class="w-6 h-6 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                    Event Information
                                </h4>
                                <div id="eventInfoSummary" class="space-y-2 text-blue-700">
                                    <!-- Event details will be populated here -->
                                </div>
                            </div>

                            <!-- Venue & Location -->
                            <div class="summary-card-purple rounded-xl p-6">
                                <h4 class="text-xl font-bold text-purple-800 mb-4 flex items-center">
                                    <svg class="w-6 h-6 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                    Venue & Location
                                </h4>
                                <div id="venueSummary" class="space-y-2 text-purple-700">
                                    <!-- Venue details will be populated here -->
                                </div>
                            </div>

                            <!-- Musical Entertainment -->
                            <div class="summary-card-green rounded-xl p-6">
                                <h4 class="text-xl font-bold text-green-800 mb-4 flex items-center">
                                    <svg class="w-6 h-6 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                                    </svg>
                                    Musical Entertainment
                                </h4>
                                <div id="bandSummary" class="space-y-2 text-green-700">
                                    <!-- Band details will be populated here -->
                                </div>
                            </div>

                            <!-- Additional Services -->
                            <div class="summary-card-orange rounded-xl p-6">
                                <h4 class="text-xl font-bold text-orange-800 mb-4 flex items-center">
                                    <svg class="w-6 h-6 text-orange-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    </svg>
                                    Additional Services
                                </h4>
                                <div id="servicesSummary" class="space-y-2 text-orange-700">
                                    <!-- Additional services will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- Ticket Sales Information -->
                        <div id="ticketSalesSummary" class="ticket-info-card rounded-xl p-6 mb-8 hidden">
                            <h4 class="text-xl font-bold text-purple-800 mb-4 flex items-center">
                                <svg class="w-6 h-6 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                                </svg>
                                Ticket Sales Information
                            </h4>
                            <div id="ticketSalesContent" class="space-y-3">
                                <!-- Ticket sales info will be populated here -->
                            </div>
                        </div>

                        <!-- Investment Breakdown -->
                        <div class="investment-card rounded-xl p-6 mb-8">
                            <h4 class="text-xl font-bold text-green-800 mb-4 flex items-center">
                                <svg class="w-6 h-6 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Investment Breakdown
                            </h4>
                            <div id="investmentBreakdown" class="space-y-2 text-green-700">
                                <!-- Investment breakdown will be populated here -->
                            </div>
                        </div>

                        <!-- Concert Thank You Message -->
                        <div class="bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-6 text-white text-center">
                            <div class="flex justify-center items-center mb-4">
                                <svg class="w-8 h-8 text-white mr-2 icon-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                                </svg>
                                <svg class="w-8 h-8 text-white mr-2 icon-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 3v10a2 2 0 002 2h8a2 2 0 002-2V7M9 7h6M9 11h6M9 15h6"></path>
                                </svg>
                                <svg class="w-8 h-8 text-white icon-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                                </svg>
                            </div>
                            <h4 class="text-2xl font-bold mb-3">Your stage is set, lights are ready, and the music is about to begin!</h4>
                            <p class="text-xl font-medium flex items-center justify-center">
                                See you at the concert!
                                <svg class="w-6 h-6 text-white ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                </svg>
                            </p>
                        </div>

                        <div class="flex justify-between mt-8">
                            <button type="button" onclick="prevStep()" class="btn-secondary text-white px-8 py-4 rounded-xl font-semibold flex items-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path>
                                </svg>
                                Edit Details
                            </button>
                            <button type="button" onclick="showBookingModal()" class="btn-primary text-white px-10 py-4 rounded-xl font-bold text-lg flex items-center">
                                Proceed to Payment
                                <svg class="w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar (Booking Progress) -->
            <div class="lg:col-span-1">
                <div class="sticky top-8">
                    <div class="bg-white rounded-2xl p-6 shadow-lg" style="background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); border: 2px solid #8b5cf6;">
                        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                            <svg class="w-6 h-6 text-purple-600 mr-2 icon-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            Booking Progress
                        </h3>
                        <div id="sidebar-details" class="space-y-3">
                            <div class="flex justify-between items-center py-2 border-b border-purple-200">
                                <span class="text-gray-600">Current Step</span>
                                <span id="current-step-display" class="font-semibold text-purple-800">1 of 5</span>
                            </div
                        </div>
                        <div class="mt-4 pt-4 border-t-2 border-purple-300">
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-bold text-gray-900 flex items-center">
                                    <svg class="w-5 h-5 text-purple-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    Estimated Total
                                </span>
                                <span class="text-xl font-bold text-purple-600">₹<span id="sidebar-total">0</span></span>
                            </div>
                        </div>
                        
                        <!-- Progress Bar -->
                        <div class="mt-6">
                            <div class="flex justify-between text-sm text-gray-600 mb-2">
                                <span>Completion</span>
                                <span id="progress-percentage">20%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div id="progress-bar" class="progress-bar bg-gradient-to-r from-purple-600 to-indigo-600 h-3 rounded-full" style="width: 20%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="modal-content bg-white rounded-2xl shadow-2xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto" style="border: 4px solid #8b5cf6;">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-2xl font-bold text-gray-900 flex items-center">
                        <svg class="w-6 h-6 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Final Booking Confirmation
                    </h3>
                    <button type="button" onclick="hideBookingModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div id="finalBookingSummary" class="space-y-4">
                    <!-- Final booking summary will be populated here -->
                </div>
                
                <!-- Payment Method Selection -->
                <div class="mt-8 p-6 bg-gray-50 rounded-xl">
                    <h4 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                        <svg class="w-6 h-6 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                        </svg>
                        Select Payment Method
                    </h4>
                    <div class="space-y-3">
                        <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="radio" name="paymentMethod" value="card" class="text-purple-600">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                            </svg>
                            <span>Credit/Debit Card</span>
                        </label>
                        <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="radio" name="paymentMethod" value="upi" class="text-purple-600">
                            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>UPI</span>
                        </label>
                        <label class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="radio" name="paymentMethod" value="cash" class="text-purple-600">
                            <svg class="w-5 h-5 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            <span>Cash</span>
                        </label>
                    </div>
                </div>

                <div class="flex space-x-4 mt-8">
                    <button type="button" onclick="confirmFinalBooking()" class="flex-1 btn-primary text-white py-3 px-6 rounded-xl font-semibold flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        Confirm Booking
                    </button>
                    <button type="button" onclick="hideBookingModal()" class="flex-1 btn-secondary text-white py-3 px-6 rounded-xl font-semibold flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Alternative Options Modal -->
    <div id="alternativeModal" class="modal fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="modal-content bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto" style="border: 4px solid #f59e0b;">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-2xl font-bold text-gray-900 flex items-center">
                        <svg class="w-6 h-6 text-yellow-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                        Alternative Options Available
                    </h3>
                    <button type="button" onclick="hideAlternativeModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div id="alternativeContent" class="space-y-6">
                    <!-- Alternative options will be populated here -->
                </div>
                <div class="flex justify-end mt-6">
                    <button type="button" onclick="hideAlternativeModal()" class="btn-secondary text-white py-3 px-6 rounded-xl font-semibold">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentStep = 1;
        let totalSteps = 5;
        let selectedVenue = null;
        let selectedBand = null;
        let selectedDecor = null;
        let selectedDate = null;
        let currentCalendarDate = new Date();
        let snackQuantities = { juice: 0, softdrinks: 0, snacks: 0 };
        let totalCost = 0;
        let ticketRevenue = 0;
        let foodCount = 0;
        
        // Pagination variables
        let currentVenuePage = 1;
        let currentBandPage = 1;
        let currentDecorationPage = 1;
        let itemsPerPage = 5;
        
        // Filter variables
        let filteredVenues = [];
        let filteredBands = [];
        let filteredDecorations = [];
        
        // Sample data with enhanced booking information
        const venues = [
            { 
                id: 1, 
                name: "Madison Square Garden", 
                location: "New York", 
                capacity: 20000, 
                pricePerHour: 25000,
                minCapacity: 5000,
                bookedSlots: [
                    { start: "2025-09-20T10:00", end: "2025-09-20T18:00" },
                    { start: "2025-09-22T14:00", end: "2025-09-22T22:00" }
                ]
            },
            { 
                id: 2, 
                name: "Crypto.com Arena", 
                location: "Los Angeles", 
                capacity: 21000, 
                pricePerHour: 22000,
                minCapacity: 3000,
                bookedSlots: [
                    { start: "2025-09-21T19:00", end: "2025-09-22T03:00" }
                ]
            },
            { 
                id: 3, 
                name: "Red Rocks Amphitheatre", 
                location: "Colorado", 
                capacity: 9525, 
                pricePerHour: 15000,
                minCapacity: 1000,
                bookedSlots: [
                    { start: "2025-09-25T15:00", end: "2025-09-25T23:00" }
                ]
            },
            { 
                id: 4, 
                name: "American Airlines Arena", 
                location: "Miami", 
                capacity: 19600, 
                pricePerHour: 20000,
                minCapacity: 2000,
                bookedSlots: []
            },
            { 
                id: 5, 
                name: "United Center", 
                location: "Chicago", 
                capacity: 23500, 
                pricePerHour: 28000,
                minCapacity: 5000,
                bookedSlots: []
            },
            { 
                id: 6, 
                name: "Staples Center", 
                location: "Los Angeles", 
                capacity: 20000, 
                pricePerHour: 26000,
                minCapacity: 3000,
                bookedSlots: []
            },
            { 
                id: 7, 
                name: "Toyota Center", 
                location: "Houston", 
                capacity: 18500, 
                pricePerHour: 18000,
                minCapacity: 2000,
                bookedSlots: []
            },
            { 
                id: 8, 
                name: "Phoenix Suns Arena", 
                location: "Arizona", 
                capacity: 18400, 
                pricePerHour: 17000,
                minCapacity: 1500,
                bookedSlots: []
            },
            { 
                id: 9, 
                name: "Ball Arena", 
                location: "Denver", 
                capacity: 20000, 
                pricePerHour: 19000,
                minCapacity: 2500,
                bookedSlots: []
            },
            { 
                id: 10, 
                name: "Climate Pledge Arena", 
                location: "Seattle", 
                capacity: 17400, 
                pricePerHour: 21000,
                minCapacity: 2000,
                bookedSlots: []
            }
        ];

        const bands = [
            { 
                id: 1, 
                name: "The Rock Legends", 
                genre: "Rock", 
                members: 5, 
                pricePerHour: 15000,
                minAudience: 1000,
                bookedSlots: [
                    { start: "2025-09-20T10:00", end: "2025-09-20T18:00" }
                ]
            },
            { 
                id: 2, 
                name: "Pop Parade", 
                genre: "Pop", 
                members: 6, 
                pricePerHour: 12000,
                minAudience: 500,
                bookedSlots: []
            },
            { 
                id: 3, 
                name: "Jazz Masters", 
                genre: "Jazz", 
                members: 4, 
                pricePerHour: 10000,
                minAudience: 200,
                bookedSlots: [
                    { start: "2025-09-21T19:00", end: "2025-09-22T01:00" }
                ]
            },
            { 
                id: 4, 
                name: "Electronic Vibes", 
                genre: "Electronic", 
                members: 3, 
                pricePerHour: 8000,
                minAudience: 300,
                bookedSlots: []
            },
            { 
                id: 5, 
                name: "Classical Ensemble", 
                genre: "Classical", 
                members: 8, 
                pricePerHour: 18000,
                minAudience: 500,
                bookedSlots: []
            },
            { 
                id: 6, 
                name: "Country Stars", 
                genre: "Country", 
                members: 5, 
                pricePerHour: 14000,
                minAudience: 800,
                bookedSlots: []
            },
            { 
                id: 7, 
                name: "Hip Hop Collective", 
                genre: "Hip Hop", 
                members: 4, 
                pricePerHour: 16000,
                minAudience: 1000,
                bookedSlots: []
            },
            { 
                id: 8, 
                name: "Indie Folk Band", 
                genre: "Folk", 
                members: 6, 
                pricePerHour: 9000,
                minAudience: 300,
                bookedSlots: []
            },
            { 
                id: 9, 
                name: "Heavy Metal Thunder", 
                genre: "Metal", 
                members: 5, 
                pricePerHour: 17000,
                minAudience: 1200,
                bookedSlots: []
            },
            { 
                id: 10, 
                name: "Reggae Rhythms", 
                genre: "Reggae", 
                members: 7, 
                pricePerHour: 11000,
                minAudience: 400,
                bookedSlots: []
            }
        ];

        const decorations = [
            { 
                id: 1, 
                name: "Elite Décor", 
                style: "Premium", 
                price: 75000,
                description: "Luxury stage setup with premium lighting",
                minCapacity: 5000,
                bookedSlots: []
            },
            { 
                id: 2, 
                name: "Standard Events", 
                style: "Standard", 
                price: 45000,
                description: "Professional stage decoration",
                minCapacity: 1000,
                bookedSlots: [
                    { start: "2025-09-20T08:00", end: "2025-09-20T20:00" }
                ]
            },
            { 
                id: 3, 
                name: "Budget Decorations", 
                style: "Basic", 
                price: 25000,
                description: "Simple and elegant setup",
                minCapacity: 100,
                bookedSlots: []
            },
            { 
                id: 4, 
                name: "Creative Concepts", 
                style: "Artistic", 
                price: 60000,
                description: "Unique and creative stage designs",
                minCapacity: 2000,
                bookedSlots: []
            },
            { 
                id: 5, 
                name: "Modern Minimalist", 
                style: "Contemporary", 
                price: 35000,
                description: "Clean and modern aesthetics",
                minCapacity: 500,
                bookedSlots: []
            },
            { 
                id: 6, 
                name: "Vintage Vibes", 
                style: "Retro", 
                price: 50000,
                description: "Classic vintage themed decorations",
                minCapacity: 1500,
                bookedSlots: []
            },
            { 
                id: 7, 
                name: "Neon Dreams", 
                style: "Futuristic", 
                price: 65000,
                description: "Neon lights and futuristic elements",
                minCapacity: 3000,
                bookedSlots: []
            },
            { 
                id: 8, 
                name: "Garden Party", 
                style: "Natural", 
                price: 40000,
                description: "Natural and green themed setup",
                minCapacity: 800,
                bookedSlots: []
            },
            { 
                id: 9, 
                name: "Royal Elegance", 
                style: "Luxury", 
                price: 80000,
                description: "Royal and elegant decorations",
                minCapacity: 4000,
                bookedSlots: []
            },
            { 
                id: 10, 
                name: "Beach Themed", 
                style: "Tropical", 
                price: 42000,
                description: "Beach and tropical themed setup",
                minCapacity: 1000,
                bookedSlots: []
            }
        ];

        // Food service providers
        const foodServices = [
            {
                id: 1,
                name: "Gourmet Catering Co.",
                pricePerPerson: 150,
                minPeople: 100,
                maxPeople: 10000,
                bookedSlots: []
            },
            {
                id: 2,
                name: "Quick Bites",
                pricePerPerson: 75,
                minPeople: 50,
                maxPeople: 5000,
                bookedSlots: [
                    { start: "2025-09-20T10:00", end: "2025-09-20T20:00" }
                ]
            }
        ];

        // Validation functions
        function validateField(fieldId) {
            const field = document.getElementById(fieldId);
            const value = field.value.trim();
            const errorElement = document.getElementById(`${fieldId}-error`);
            const successElement = document.getElementById(`${fieldId}-success`);
            
            let isValid = true;
            let errorMessage = '';

            switch(fieldId) {
                case 'userName':
                    if (!value) {
                        errorMessage = 'Name is required';
                        isValid = false;
                    } else if (value.length < 2) {
                        errorMessage = 'Name must be at least 2 characters';
                        isValid = false;
                    }
                    break;
                    
                case 'userEmail':
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!value) {
                        errorMessage = 'Email is required';
                        isValid = false;
                    } else if (!emailRegex.test(value)) {
                        errorMessage = 'Please enter a valid email address';
                        isValid = false;
                    }
                    break;
                    
                case 'userPhone':
                    const phoneRegex = /^[6-9]\d{9}$/;
                    if (!value) {
                        errorMessage = 'Phone number is required';
                        isValid = false;
                    } else if (!phoneRegex.test(value)) {
                        errorMessage = 'Please enter a valid 10-digit phone number';
                        isValid = false;
                    }
                    break;
                    
                case 'eventName':
                    if (!value) {
                        errorMessage = 'Event name is required';
                        isValid = false;
                    } else if (value.length < 3) {
                        errorMessage = 'Event name must be at least 3 characters';
                        isValid = false;
                    }
                    break;
                    
                case 'startDateTime':
                case 'endDateTime':
                    if (!value) {
                        errorMessage = 'Date and time is required';
                        isValid = false;
                    } else {
                        const selectedDate = new Date(value);
                        const now = new Date();
                        now.setHours(now.getHours() + 2);
                        
                        if (selectedDate < now) {
                            errorMessage = 'Date must be at least 2 hours from now';
                            isValid = false;
                        }
                    }
                    break;
            }

            if (isValid) {
                field.classList.remove('error');
                field.classList.add('success');
                errorElement.classList.add('hidden');
                successElement.classList.remove('hidden');
            } else {
                field.classList.add('error');
                field.classList.remove('success');
                errorElement.textContent = errorMessage;
                errorElement.classList.remove('hidden');
                successElement.classList.add('hidden');
            }

            updateStepButton();
            return isValid;
        }

        function realTimeValidation(fieldId) {
            const field = document.getElementById(fieldId);
            const value = field.value.trim();

            if (field.classList.contains('error') && value.length > 0) {
                field.classList.remove('error');
                document.getElementById(`${fieldId}-error`).classList.add('hidden');
            }
        }

        function validateDateTimes() {
            const startField = document.getElementById('startDateTime');
            const endField = document.getElementById('endDateTime');
            const startValue = startField.value;
            const endValue = endField.value;
            
            if (startValue && endValue) {
                const start = new Date(startValue);
                const end = new Date(endValue);
                
                if (end <= start) {
                    endField.classList.add('error');
                    document.getElementById('endDateTime-error').textContent = 'End time must be after start time';
                    document.getElementById('endDateTime-error').classList.remove('hidden');
                    return false;
                } else {
                    endField.classList.remove('error');
                    endField.classList.add('success');
                    document.getElementById('endDateTime-error').classList.add('hidden');
                    document.getElementById('endDateTime-success').classList.remove('hidden');
                }
            }
            
            validateField('startDateTime');
            validateField('endDateTime');
            updateCalendar();
            return true;
        }

        function updateStepButton() {
            const step1NextBtn = document.getElementById('step1-next');
            const step2NextBtn = document.getElementById('step2-next');
            
            if (currentStep === 1) {
                const requiredFields = ['userName', 'userEmail', 'userPhone', 'eventName', 'startDateTime', 'endDateTime'];
                const allValid = requiredFields.every(fieldId => {
                    const field = document.getElementById(fieldId);
                    return field.value.trim() && !field.classList.contains('error');
                });
                
                step1NextBtn.disabled = !allValid;
                if (allValid) {
                    step1NextBtn.classList.remove('opacity-50');
                } else {
                    step1NextBtn.classList.add('opacity-50');
                }
            }
            
            if (currentStep === 2) {
                const hasVenue = selectedVenue !== null;
                const hasBand = selectedBand !== null;
                
                step2NextBtn.disabled = !(hasVenue && hasBand);
                if (hasVenue && hasBand) {
                    step2NextBtn.classList.remove('opacity-50');
                } else {
                    step2NextBtn.classList.add('opacity-50');
                }
            }
        }

        // Step navigation functions
        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < totalSteps) {
                    document.getElementById(`step-${currentStep}`).classList.add('hidden');
                    currentStep++;
                    document.getElementById(`step-${currentStep}`).classList.remove('hidden');
                    updateProgress();
                    
                    if (currentStep === 2) {
                        initializeStep2();
                    } else if (currentStep === 3) {
                        initializeCalendar();
                    } else if (currentStep === 5) {
                        generateSummary();
                    }
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                document.getElementById(`step-${currentStep}`).classList.add('hidden');
                currentStep--;
                document.getElementById(`step-${currentStep}`).classList.remove('hidden');
                updateProgress();
            }
        }

        function validateCurrentStep() {
            switch(currentStep) {
                case 1:
                    return validateStep1();
                case 2:
                    return validateStep2();
                case 3:
                    return validateStep3();
                case 4:
                    return validateStep4();
                default:
                    return true;
            }
        }

        function validateStep1() {
            const fields = ['userName', 'userEmail', 'userPhone', 'eventName', 'startDateTime', 'endDateTime'];
            let allValid = true;
            
            fields.forEach(fieldId => {
                if (!validateField(fieldId)) {
                    allValid = false;
                }
            });
            
            return allValid && validateDateTimes();
        }

        function validateStep2() {
            let isValid = true;
            
            if (!selectedVenue) {
                document.getElementById('venue-error').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('venue-error').classList.add('hidden');
            }
            
            if (!selectedBand) {
                document.getElementById('band-error').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('band-error').classList.add('hidden');
            }
            
            return isValid;
        }

        function validateStep3() {
            if (!selectedDate) {
                alert('Please select an available date for your event.');
                return false;
            }
            
            return true;
        }

        function validateStep4() {
            const ticketEnabled = document.getElementById('ticketBookingEnabled').value === 'yes';
            
            if (ticketEnabled) {
                const premiumCount = parseInt(document.getElementById('premiumCount').value) || 0;
                const premiumPrice = parseFloat(document.getElementById('premiumPrice').value) || 0;
                const goldCount = parseInt(document.getElementById('goldCount').value) || 0;
                const goldPrice = parseFloat(document.getElementById('goldPrice').value) || 0;
                const silverCount = parseInt(document.getElementById('silverCount').value) || 0;
                const silverPrice = parseFloat(document.getElementById('silverPrice').value) || 0;
                
                const hasValidTickets = (premiumCount > 0 && premiumPrice > 0) || 
                                      (goldCount > 0 && goldPrice > 0) || 
                                      (silverCount > 0 && silverPrice > 0);
                
                if (!hasValidTickets) {
                    document.getElementById('ticket-validation-error').classList.remove('hidden');
                    return false;
                } else {
                    document.getElementById('ticket-validation-error').classList.add('hidden');
                }
            }
            
            return true;
        }

        function updateProgress() {
            const progressPercentage = (currentStep / totalSteps) * 100;
            document.getElementById('progress-percentage').textContent = `${Math.round(progressPercentage)}%`;
            document.getElementById('progress-bar').style.width = `${progressPercentage}%`;
            document.getElementById('current-step-display').textContent = `${currentStep} of ${totalSteps}`;
            calculateTotalCost();
        }

        // Food count functions
        function updateFoodCount() {
            const count = parseInt(document.getElementById('foodCount').value) || 0;
            foodCount = count;
            
            if (count > 0) {
                const mealType = document.getElementById('mealType').value || 'Not specified';
                document.getElementById('foodCountDisplay').classList.remove('hidden');
                document.getElementById('foodSummary').textContent = 
                    `Planning for ${count.toLocaleString()} people - ${mealType}`;
            } else {
                document.getElementById('foodCountDisplay').classList.add('hidden');
            }
            
            calculateTotalCost();
        }

        function filterByCapacity() {
            const foodCountValue = parseInt(document.getElementById('foodCount').value) || 0;
            
            if (foodCountValue > 0) {
                // Auto-set capacity filter if food count is specified
                const capacityFilter = document.getElementById('capacityFilter');
                if (foodCountValue <= 1000) {
                    capacityFilter.value = '1000';
                } else if (foodCountValue <= 5000) {
                    capacityFilter.value = '5000';
                } else if (foodCountValue <= 10000) {
                    capacityFilter.value = '10000';
                } else {
                    capacityFilter.value = '20000';
                }
            }
            
            filterVenues();
            filterBands();
            filterDecorations();
        }

        // Initialize Step 2 with all components
        function initializeStep2() {
            filterVenues();
            filterBands();
            filterDecorations();
        }

        // Enhanced venue functions with pagination
        function filterVenues() {
            const capacityFilter = document.getElementById('capacityFilter').value;
            const locationFilter = document.getElementById('locationFilter').value;
            const foodCountValue = parseInt(document.getElementById('foodCount').value) || 0;
            
            filteredVenues = venues.filter(venue => {
                let matches = true;
                
                if (capacityFilter && venue.capacity > parseInt(capacityFilter)) {
                    matches = false;
                }
                
                if (locationFilter && venue.location !== locationFilter) {
                    matches = false;
                }
                
                if (foodCountValue > 0 && venue.capacity < foodCountValue) {
                    matches = false;
                }
                
                if (foodCountValue > 0 && venue.minCapacity > foodCountValue) {
                    matches = false;
                }
                
                return matches;
            });
            
            currentVenuePage = 1;
            renderVenues();
        }

        function renderVenues() {
            const startIndex = (currentVenuePage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedVenues = filteredVenues.slice(startIndex, endIndex);
            
            const venuesContainer = document.getElementById('venuesList');
            venuesContainer.innerHTML = '';
            
            if (paginatedVenues.length === 0) {
                venuesContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                        <p class="text-xl font-semibold mb-2">No venues found</p>
                        <p>Try adjusting your filters or food requirements</p>
                    </div>
                `;
                document.getElementById('venuePagination').classList.add('hidden');
                return;
            }
            
            paginatedVenues.forEach(venue => {
                const isSelected = selectedVenue && selectedVenue.id === venue.id;
                const venueCard = document.createElement('div');
                venueCard.className = `venue-card bg-green-50 border-2 border-green-400 rounded-xl p-6 ${isSelected ? 'selected' : ''}`;
                venueCard.onclick = () => selectVenue(venue);
                
                venueCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="text-xl font-bold text-green-800 flex items-center">
                                <svg class="w-5 h-5 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                                </svg>
                                ${venue.name}
                            </h4>
                            <p class="text-green-700 flex items-center mt-1">
                                <svg class="w-4 h-4 text-green-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                ${venue.location}
                            </p>
                            <p class="text-green-700 flex items-center mt-1">
                                <svg class="w-4 h-4 text-green-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                                Capacity: ${venue.capacity.toLocaleString()} guests
                            </p>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-bold text-green-800 flex items-center">
                                <svg class="w-5 h-5 text-green-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                ${venue.pricePerHour.toLocaleString()}/hour
                            </p>
                            <p class="text-green-600" id="venue-total-${venue.id}">Total: ₹${calculateVenueTotal(venue).toLocaleString()}</p>
                        </div>
                    </div>
                `;
                
                venuesContainer.appendChild(venueCard);
            });
            
            renderVenuePagination();
        }

        function renderVenuePagination() {
            const totalPages = Math.ceil(filteredVenues.length / itemsPerPage);
            
            if (totalPages <= 1) {
                document.getElementById('venuePagination').classList.add('hidden');
                return;
            }
            
            document.getElementById('venuePagination').classList.remove('hidden');
            const pageNumbers = document.getElementById('venuePageNumbers');
            pageNumbers.innerHTML = '';
            
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `pagination-btn px-3 py-1 rounded-lg text-sm ${i === currentVenuePage ? 'active' : 'bg-gray-200 text-gray-700 hover:bg-purple-200'}`;
                pageBtn.textContent = i;
                pageBtn.onclick = () => {
                    currentVenuePage = i;
                    renderVenues();
                };
                pageNumbers.appendChild(pageBtn);
            }
        }

        function changeVenuePage(direction) {
            const totalPages = Math.ceil(filteredVenues.length / itemsPerPage);
            currentVenuePage += direction;
            
            if (currentVenuePage < 1) currentVenuePage = 1;
            if (currentVenuePage > totalPages) currentVenuePage = totalPages;
            
            renderVenues();
        }

        function selectVenue(venue) {
            selectedVenue = venue;
            renderVenues();
            updateStepButton();
            calculateTotalCost();
        }

        function calculateVenueTotal(venue) {
            const startTime = document.getElementById('startDateTime').value;
            const endTime = document.getElementById('endDateTime').value;
            
            if (startTime && endTime) {
                const start = new Date(startTime);
                const end = new Date(endTime);
                const hours = Math.ceil((end - start) / (1000 * 60 * 60));
                return venue.pricePerHour * hours;
            }
            
            return venue.pricePerHour * 8; // Default 8 hours
        }

        // Enhanced band functions with pagination
        function filterBands(searchTerm = '') {
            const foodCountValue = parseInt(document.getElementById('foodCount').value) || 0;
            
            filteredBands = bands.filter(band => {
                let matches = true;
                
                if (searchTerm && !band.name.toLowerCase().includes(searchTerm.toLowerCase()) && 
                    !band.genre.toLowerCase().includes(searchTerm.toLowerCase())) {
                    matches = false;
                }
                
                if (foodCountValue > 0 && band.minAudience > foodCountValue) {
                    matches = false;
                }
                
                return matches;
            });
            
            currentBandPage = 1;
            renderBands();
        }

        function renderBands() {
            const startIndex = (currentBandPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedBands = filteredBands.slice(startIndex, endIndex);
            
            const bandsContainer = document.getElementById('bandsList');
            bandsContainer.innerHTML = '';
            
            if (paginatedBands.length === 0) {
                bandsContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                        </svg>
                        <p class="text-xl font-semibold mb-2">No bands found</p>
                        <p>Try adjusting your search or audience size</p>
                    </div>
                `;
                document.getElementById('bandPagination').classList.add('hidden');
                return;
            }
            
            paginatedBands.forEach(band => {
                const isSelected = selectedBand && selectedBand.id === band.id;
                const bandCard = document.createElement('div');
                bandCard.className = `venue-card bg-purple-50 border-2 border-purple-400 rounded-xl p-6 cursor-pointer hover:shadow-lg transition-all ${isSelected ? 'selected' : ''}`;
                bandCard.onclick = () => selectBand(band);
                
                bandCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="text-xl font-bold text-purple-800 flex items-center">
                                <svg class="w-5 h-5 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                                </svg>
                                ${band.name}
                            </h4>
                            <p class="text-purple-700 flex items-center mt-1">
                                <svg class="w-4 h-4 text-purple-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 3v10a2 2 0 002 2h8a2 2 0 002-2V7M9 7h6M9 11h6M9 15h6"></path>
                                </svg>
                                Genre: ${band.genre}
                            </p>
                            <p class="text-purple-700 flex items-center mt-1">
                                <svg class="w-4 h-4 text-purple-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                                Members: ${band.members} | Min Audience: ${band.minAudience.toLocaleString()}
                            </p>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-bold text-purple-800 flex items-center">
                                <svg class="w-5 h-5 text-purple-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                ${band.pricePerHour.toLocaleString()}/hour
                            </p>
                        </div>
                    </div>
                `;
                
                bandsContainer.appendChild(bandCard);
            });
            
            renderBandPagination();
        }

        function renderBandPagination() {
            const totalPages = Math.ceil(filteredBands.length / itemsPerPage);
            
            if (totalPages <= 1) {
                document.getElementById('bandPagination').classList.add('hidden');
                return;
            }
            
            document.getElementById('bandPagination').classList.remove('hidden');
            const pageNumbers = document.getElementById('bandPageNumbers');
            pageNumbers.innerHTML = '';
            
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `pagination-btn px-3 py-1 rounded-lg text-sm ${i === currentBandPage ? 'active' : 'bg-gray-200 text-gray-700 hover:bg-purple-200'}`;
                pageBtn.textContent = i;
                pageBtn.onclick = () => {
                    currentBandPage = i;
                    renderBands();
                };
                pageNumbers.appendChild(pageBtn);
            }
        }

        function changeBandPage(direction) {
            const totalPages = Math.ceil(filteredBands.length / itemsPerPage);
            currentBandPage += direction;
            
            if (currentBandPage < 1) currentBandPage = 1;
            if (currentBandPage > totalPages) currentBandPage = totalPages;
            
            renderBands();
        }

        function selectBand(band) {
            selectedBand = band;
            renderBands();
            updateStepButton();
            calculateTotalCost();
        }

        // Enhanced decoration functions with pagination
        function filterDecorations(searchTerm = '') {
            const foodCountValue = parseInt(document.getElementById('foodCount').value) || 0;
            
            filteredDecorations = decorations.filter(decor => {
                let matches = true;
                
                if (searchTerm && !decor.name.toLowerCase().includes(searchTerm.toLowerCase()) && 
                    !decor.style.toLowerCase().includes(searchTerm.toLowerCase())) {
                    matches = false;
                }
                
                if (foodCountValue > 0 && decor.minCapacity > foodCountValue) {
                    matches = false;
                }
                
                return matches;
            });
            
            currentDecorationPage = 1;
            renderDecorations();
        }

        function renderDecorations() {
            const startIndex = (currentDecorationPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedDecorations = filteredDecorations.slice(startIndex, endIndex);
            
            const decorationsContainer = document.getElementById('decorationsList');
            decorationsContainer.innerHTML = '';
            
            if (paginatedDecorations.length === 0) {
                decorationsContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4 4 4 0 004-4V5z"></path>
                        </svg>
                        <p class="text-xl font-semibold mb-2">No decorations found</p>
                        <p>Try adjusting your search or capacity requirements</p>
                    </div>
                `;
                document.getElementById('decorationPagination').classList.add('hidden');
                return;
            }
            
            paginatedDecorations.forEach(decor => {
                const isSelected = selectedDecor && selectedDecor.id === decor.id;
                const decorCard = document.createElement('div');
                decorCard.className = `venue-card bg-orange-50 border-2 border-orange-400 rounded-xl p-6 cursor-pointer hover:shadow-lg transition-all ${isSelected ? 'selected' : ''}`;
                decorCard.onclick = () => selectDecor(decor);
                
                decorCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="text-xl font-bold text-orange-800 flex items-center">
                                <svg class="w-5 h-5 text-orange-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4 4 4 0 004-4V5z"></path>
                                </svg>
                                ${decor.name}
                            </h4>
                            <p class="text-orange-700 flex items-center mt-1">
                                <svg class="w-4 h-4 text-orange-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 3v10a2 2 0 002 2h8a2 2 0 002-2V7M9 7h6M9 11h6M9 15h6"></path>
                                </svg>
                                Style: ${decor.style}
                            </p>
                            <p class="text-orange-700 mt-1">${decor.description}</p>
                            <p class="text-orange-700 flex items-center mt-1">
                                <svg class="w-4 h-4 text-orange-600 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                                Min Capacity: ${decor.minCapacity.toLocaleString()}
                            </p>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-bold text-orange-800">₹${decor.price.toLocaleString()}</p>
                        </div>
                    </div>
                `;
                
                decorationsContainer.appendChild(decorCard);
            });
            
            renderDecorationPagination();
        }

        function renderDecorationPagination() {
            const totalPages = Math.ceil(filteredDecorations.length / itemsPerPage);
            
            if (totalPages <= 1) {
                document.getElementById('decorationPagination').classList.add('hidden');
                return;
            }
            
            document.getElementById('decorationPagination').classList.remove('hidden');
            const pageNumbers = document.getElementById('decorationPageNumbers');
            pageNumbers.innerHTML = '';
            
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `pagination-btn px-3 py-1 rounded-lg text-sm ${i === currentDecorationPage ? 'active' : 'bg-gray-200 text-gray-700 hover:bg-purple-200'}`;
                pageBtn.textContent = i;
                pageBtn.onclick = () => {
                    currentDecorationPage = i;
                    renderDecorations();
                };
                pageNumbers.appendChild(pageBtn);
            }
        }

        function changeDecorationPage(direction) {
            const totalPages = Math.ceil(filteredDecorations.length / itemsPerPage);
            currentDecorationPage += direction;
            
            if (currentDecorationPage < 1) currentDecorationPage = 1;
            if (currentDecorationPage > totalPages) currentDecorationPage = totalPages;
            
            renderDecorations();
        }

        function selectDecor(decor) {
            selectedDecor = decor;
            renderDecorations();
            calculateTotalCost();
        }

        // Quantity management
        function updateQuantity(item, change) {
            snackQuantities[item] = Math.max(0, snackQuantities[item] + change);
            document.getElementById(`${item}-qty`).textContent = snackQuantities[item];
            calculateTotalCost();
        }

        // Enhanced calendar functions with comprehensive availability checking
        function initializeCalendar() {
            updateCalendarDisplay();
            
            document.getElementById('prevMonth').onclick = () => {
                currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
                updateCalendarDisplay();
            };
            
            document.getElementById('nextMonth').onclick = () => {
                currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
                updateCalendarDisplay();
            };
        }

        function updateCalendarDisplay() {
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'];
            
            document.getElementById('currentMonth').textContent = 
                `${monthNames[currentCalendarDate.getMonth()]} ${currentCalendarDate.getFullYear()}`;
            
            const firstDay = new Date(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth(), 1);
            const lastDay = new Date(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth() + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            const today = new Date();
            const maxDate = new Date();
            maxDate.setMonth(maxDate.getMonth() + 3);
            
            for (let i = 0; i < 42; i++) {
                const cellDate = new Date(startDate);
                cellDate.setDate(startDate.getDate() + i);
                
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day w-10 h-10 flex items-center justify-center text-sm rounded-lg font-medium';
                dayElement.textContent = cellDate.getDate();
                
                const isCurrentMonth = cellDate.getMonth() === currentCalendarDate.getMonth();
                const isToday = cellDate.toDateString() === today.toDateString();
                const isPast = cellDate < today;
                const isFuture = cellDate > maxDate;
                const availability = checkComprehensiveAvailability(cellDate);
                
                if (isPast || isFuture || !isCurrentMonth) {
                    dayElement.className += ' text-gray-400 cursor-not-allowed';
                } else if (availability.status === 'available') {
                    dayElement.className += ' available';
                    dayElement.onclick = () => selectDate(cellDate);
                    dayElement.title = 'All services available - Click to select';
                } else if (availability.status === 'partial') {
                    dayElement.className += ' partially-available';
                    dayElement.onclick = () => handlePartialAvailability(cellDate, availability);
                    dayElement.title = 'Some services unavailable - Click to see alternatives';
                } else {
                    dayElement.className += ' unavailable';
                    dayElement.onclick = () => handleUnavailableDate(cellDate, availability);
                    dayElement.title = 'No services available - Click to see alternatives';
                }
                
                if (isToday) {
                    dayElement.className += ' ring-2 ring-blue-500';
                }
                
                if (selectedDate && cellDate.toDateString() === selectedDate.toDateString()) {
                    dayElement.className = dayElement.className.replace(/available|partially-available|unavailable/, 'selected');
                }
                
                calendarGrid.appendChild(dayElement);
            }
        }

        function checkComprehensiveAvailability(date) {
            const startTime = document.getElementById('startDateTime').value;
            const endTime = document.getElementById('endDateTime').value;
            
            if (!startTime || !endTime) 
                return { status: 'available', message: 'Available'}
        
        
        const dateStr = date.toISOString().split('T')[0];
        const eventStart = new Date(`${dateStr}T${startTime.split('T')[1]}`);
        const eventEnd = new Date(`${dateStr}T${endTime.split('T')[1]}`);
        
        let unavailableServices = [];
        let alternativeOptions = {
            venues: [],
            bands: [],
            decorations: [],
            food: []
        };
        
        // Check venue availability
        if (selectedVenue) {
            const venueConflict = selectedVenue.bookedSlots.some(slot => {
                const slotStart = new Date(slot.start);
                const slotEnd = new Date(slot.end);
                return eventStart < slotEnd && eventEnd > slotStart;
            });
            
            if (venueConflict) {
                unavailableServices.push('venue');
                // Find alternative venues
                alternativeOptions.venues = venues.filter(v => 
                    v.id !== selectedVenue.id && 
                    !v.bookedSlots.some(slot => {
                        const slotStart = new Date(slot.start);
                        const slotEnd = new Date(slot.end);
                        return eventStart < slotEnd && eventEnd > slotStart;
                    }) &&
                    (!foodCount || v.capacity >= foodCount)
                ).slice(0, 3); // Show top 3 alternatives
            }
        }
        
        // Check band availability
        if (selectedBand) {
            const bandConflict = selectedBand.bookedSlots.some(slot => {
                const slotStart = new Date(slot.start);
                const slotEnd = new Date(slot.end);
                return eventStart < slotEnd && eventEnd > slotStart;
            });
            
            if (bandConflict) {
                unavailableServices.push('band');
                // Find alternative bands
                alternativeOptions.bands = bands.filter(b => 
                    b.id !== selectedBand.id && 
                    !b.bookedSlots.some(slot => {
                        const slotStart = new Date(slot.start);
                        const slotEnd = new Date(slot.end);
                        return eventStart < slotEnd && eventEnd > slotStart;
                    }) &&
                    (!foodCount || b.minAudience <= foodCount)
                ).slice(0, 3); // Show top 3 alternatives
            }
        }
        
        // Check decoration availability
        if (selectedDecor) {
            const decorConflict = selectedDecor.bookedSlots.some(slot => {
                const slotStart = new Date(slot.start);
                const slotEnd = new Date(slot.end);
                return eventStart < slotEnd && eventEnd > slotStart;
            });
            
            if (decorConflict) {
                unavailableServices.push('decoration');
                // Find alternative decorations
                alternativeOptions.decorations = decorations.filter(d => 
                    d.id !== selectedDecor.id && 
                    !d.bookedSlots.some(slot => {
                        const slotStart = new Date(slot.start);
                        const slotEnd = new Date(slot.end);
                        return eventStart < slotEnd && eventEnd > slotStart;
                    }) &&
                    (!foodCount || d.minCapacity <= foodCount)
                ).slice(0, 3); // Show top 3 alternatives
            }
        }
        
        // Check food service availability
        if (foodCount > 0) {
            const availableFoodServices = foodServices.filter(fs => 
                fs.minPeople <= foodCount && 
                fs.maxPeople >= foodCount &&
                !fs.bookedSlots.some(slot => {
                    const slotStart = new Date(slot.start);
                    const slotEnd = new Date(slot.end);
                    return eventStart < slotEnd && eventEnd > slotStart;
                })
            );
            
            if (availableFoodServices.length === 0) {
                unavailableServices.push('food');
                // Find alternative food services for different dates
                alternativeOptions.food = foodServices.filter(fs => 
                    fs.minPeople <= foodCount && fs.maxPeople >= foodCount
                ).slice(0, 2);
            }
        }
        
        if (unavailableServices.length === 0) {
            return { status: 'available', message: 'All services available' };
        } else if (unavailableServices.length < 3) {
            return { 
                status: 'partial', 
                message: `Some services unavailable: ${unavailableServices.join(', ')}`,
                unavailableServices,
                alternatives: alternativeOptions
            };
        } else {
            return { 
                status: 'unavailable', 
                message: 'No services available',
                unavailableServices,
                alternatives: alternativeOptions
            };
        }
    }

    function selectDate(date) {
        selectedDate = date;
        updateCalendarDisplay();
        
        document.getElementById('selectedDateDisplay').innerHTML = `
            <div class="bg-purple-50 border-2 border-purple-400 rounded-xl p-4">
                <div class="font-medium text-purple-900 flex items-center justify-center">
                    <svg class="w-5 h-5 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Selected Date: ${date.toLocaleDateString()}
                </div>
                <div class="text-center text-sm text-green-600 mt-2">✅ All services available</div>
            </div>
        `;
        
        const step3NextBtn = document.getElementById('step3-next');
        step3NextBtn.disabled = false;
        step3NextBtn.classList.remove('opacity-50');
    }

    function handlePartialAvailability(date, availability) {
        showAlternativeOptions(date, availability);
    }

    function handleUnavailableDate(date, availability) {
        showAlternativeOptions(date, availability);
    }

    function showAlternativeOptions(date, availability) {
        const modal = document.getElementById('alternativeModal');
        const content = document.getElementById('alternativeContent');
        
        let alternativeHtml = `
            <div class="bg-yellow-50 border-2 border-yellow-300 rounded-xl p-6 mb-6">
                <h4 class="text-xl font-bold text-yellow-800 mb-2 flex items-center">
                    <svg class="w-6 h-6 text-yellow-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                    ${date.toLocaleDateString()} - Service Availability Issue
                </h4>
                <p class="text-yellow-700">${availability.message}</p>
                <p class="text-yellow-700 mt-2">Below are alternative options you can choose from:</p>
            </div>
        `;

        // Show alternative venues if needed
        if (availability.unavailableServices.includes('venue') && availability.alternatives.venues.length > 0) {
            alternativeHtml += `
                <div class="mb-6">
                    <h5 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <svg class="w-5 h-5 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                        Alternative Venues Available
                    </h5>
                    <div class="space-y-3">
            `;
            
            availability.alternatives.venues.forEach(venue => {
                alternativeHtml += `
                    <div class="bg-green-50 border border-green-300 rounded-lg p-4 cursor-pointer hover:bg-green-100 transition-colors"
                         onclick="selectAlternativeVenue(${venue.id}, '${date.toISOString()}')">
                        <div class="flex justify-between items-start">
                            <div>
                                <h6 class="font-bold text-green-800">${venue.name}</h6>
                                <p class="text-green-700 text-sm">${venue.location} • Capacity: ${venue.capacity.toLocaleString()}</p>
                            </div>
                            <div class="text-green-800 font-semibold">₹${venue.pricePerHour.toLocaleString()}/hr</div>
                        </div>
                    </div>
                `;
            });
            
            alternativeHtml += `</div></div>`;
        }

        // Show alternative bands if needed
        if (availability.unavailableServices.includes('band') && availability.alternatives.bands.length > 0) {
            alternativeHtml += `
                <div class="mb-6">
                    <h5 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <svg class="w-5 h-5 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                        </svg>
                        Alternative Bands Available
                    </h5>
                    <div class="space-y-3">
            `;
            
            availability.alternatives.bands.forEach(band => {
                alternativeHtml += `
                    <div class="bg-purple-50 border border-purple-300 rounded-lg p-4 cursor-pointer hover:bg-purple-100 transition-colors"
                         onclick="selectAlternativeBand(${band.id}, '${date.toISOString()}')">
                        <div class="flex justify-between items-start">
                            <div>
                                <h6 class="font-bold text-purple-800">${band.name}</h6>
                                <p class="text-purple-700 text-sm">${band.genre} • ${band.members} members</p>
                            </div>
                            <div class="text-purple-800 font-semibold">₹${band.pricePerHour.toLocaleString()}/hr</div>
                        </div>
                    </div>
                `;
            });
            
            alternativeHtml += `</div></div>`;
        }

        // Show alternative decorations if needed
        if (availability.unavailableServices.includes('decoration') && availability.alternatives.decorations.length > 0) {
            alternativeHtml += `
                <div class="mb-6">
                    <h5 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <svg class="w-5 h-5 text-orange-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4 4 4 0 004-4V5z"></path>
                        </svg>
                        Alternative Decorations Available
                    </h5>
                    <div class="space-y-3">
            `;
            
            availability.alternatives.decorations.forEach(decor => {
                alternativeHtml += `
                    <div class="bg-orange-50 border border-orange-300 rounded-lg p-4 cursor-pointer hover:bg-orange-100 transition-colors"
                         onclick="selectAlternativeDecoration(${decor.id}, '${date.toISOString()}')">
                        <div class="flex justify-between items-start">
                            <div>
                                <h6 class="font-bold text-orange-800">${decor.name}</h6>
                                <p class="text-orange-700 text-sm">${decor.style} • ${decor.description}</p>
                            </div>
                            <div class="text-orange-800 font-semibold">₹${decor.price.toLocaleString()}</div>
                        </div>
                    </div>
                `;
            });
            
            alternativeHtml += `</div></div>`;
        }

        if (availability.unavailableServices.includes('food') && availability.alternatives.food.length > 0) {
            alternativeHtml += `
                <div class="mb-6">
                    <h5 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <svg class="w-5 h-5 text-yellow-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                        </svg>
                        Consider Different Date for Food Service
                    </h5>
                    <div class="bg-yellow-50 border border-yellow-300 rounded-lg p-4">
                        <p class="text-yellow-700">Food services are not available on this date. Consider selecting a different date or reducing the food count requirements.</p>
                    </div>
                </div>
            `;
        }

        content.innerHTML = alternativeHtml;
        modal.classList.remove('hidden');
        modal.classList.add('flex');
    }

    function selectAlternativeVenue(venueId, dateStr) {
        const venue = venues.find(v => v.id === venueId);
        selectedVenue = venue;
        selectedDate = new Date(dateStr);
        hideAlternativeModal();
        updateCalendarDisplay();
        filterVenues(); // Refresh venue list to show selection
        
        document.getElementById('selectedDateDisplay').innerHTML = `
            <div class="bg-purple-50 border-2 border-purple-400 rounded-xl p-4">
                <div class="font-medium text-purple-900 flex items-center justify-center">
                    <svg class="w-5 h-5 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Selected Date: ${selectedDate.toLocaleDateString()}
                </div>
                <div class="text-center text-sm text-blue-600 mt-2">🔄 Alternative venue selected: ${venue.name}</div>
            </div>
        `;
        
        const step3NextBtn = document.getElementById('step3-next');
        step3NextBtn.disabled = false;
        step3NextBtn.classList.remove('opacity-50');
    }

    function selectAlternativeBand(bandId, dateStr) {
        const band = bands.find(b => b.id === bandId);
        selectedBand = band;
        selectedDate = new Date(dateStr);
        hideAlternativeModal();
        updateCalendarDisplay();
        filterBands(); // Refresh band list to show selection
        
        document.getElementById('selectedDateDisplay').innerHTML = `
            <div class="bg-purple-50 border-2 border-purple-400 rounded-xl p-4">
                <div class="font-medium text-purple-900 flex items-center justify-center">
                    <svg class="w-5 h-5 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Selected Date: ${selectedDate.toLocaleDateString()}
                </div>
                <div class="text-center text-sm text-blue-600 mt-2">🔄 Alternative band selected: ${band.name}</div>
            </div>
        `;
        
        const step3NextBtn = document.getElementById('step3-next');
        step3NextBtn.disabled = false;
        step3NextBtn.classList.remove('opacity-50');
    }

    function selectAlternativeDecoration(decorId, dateStr) {
        const decor = decorations.find(d => d.id === decorId);
        selectedDecor = decor;
        selectedDate = new Date(dateStr);
        hideAlternativeModal();
        updateCalendarDisplay();
        filterDecorations(); // Refresh decoration list to show selection
        
        document.getElementById('selectedDateDisplay').innerHTML = `
            <div class="bg-purple-50 border-2 border-purple-400 rounded-xl p-4">
                <div class="font-medium text-purple-900 flex items-center justify-center">
                    <svg class="w-5 h-5 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Selected Date: ${selectedDate.toLocaleDateString()}
                </div>
                <div class="text-center text-sm text-blue-600 mt-2">🔄 Alternative decoration selected: ${decor.name}</div>
            </div>
        `;
        
        const step3NextBtn = document.getElementById('step3-next');
        step3NextBtn.disabled = false;
        step3NextBtn.classList.remove('opacity-50');
    }

    function hideAlternativeModal() {
        document.getElementById('alternativeModal').classList.add('hidden');
        document.getElementById('alternativeModal').classList.remove('flex');
    }

    function updateCalendar() {
        if (currentStep === 3) {
            updateCalendarDisplay();
        }
    }

    // Ticket functions
    function toggleTicketSection() {
        const isEnabled = document.getElementById('ticketBookingEnabled').value === 'yes';
        const ticketSection = document.getElementById('ticketSection');
        
        if (isEnabled) {
            ticketSection.classList.remove('hidden');
        } else {
            ticketSection.classList.add('hidden');
            clearTicketInputs();
            calculateTicketRevenue();
        }
    }

    function clearTicketInputs() {
        ['premiumCount', 'premiumPrice', 'goldCount', 'goldPrice', 'silverCount', 'silverPrice'].forEach(id => {
            document.getElementById(id).value = '';
        });
    }

    function validateTicketField(type) {
        const countField = document.getElementById(`${type}Count`);
        const priceField = document.getElementById(`${type}Price`);
        const countError = document.getElementById(`${type}Count-error`);
        const priceError = document.getElementById(`${type}Price-error`);
        
        let countValid = true;
        let priceValid = true;
        
        if (countField.value && (isNaN(countField.value) || parseInt(countField.value) < 0 || parseInt(countField.value) > 10000)) {
            countError.classList.remove('hidden');
            countValid = false;
        } else {
            countError.classList.add('hidden');
        }
        
        if (priceField.value && (isNaN(priceField.value) || parseFloat(priceField.value) < 1)) {
            priceError.classList.remove('hidden');
            priceValid = false;
        } else {
            priceError.classList.add('hidden');
        }
        
        return countValid && priceValid;
    }

    function calculateTicketRevenue() {
        const premiumCount = parseInt(document.getElementById('premiumCount').value) || 0;
        const premiumPrice = parseFloat(document.getElementById('premiumPrice').value) || 0;
        const goldCount = parseInt(document.getElementById('goldCount').value) || 0;
        const goldPrice = parseFloat(document.getElementById('goldPrice').value) || 0;
        const silverCount = parseInt(document.getElementById('silverCount').value) || 0;
        const silverPrice = parseFloat(document.getElementById('silverPrice').value) || 0;
        
        const premiumRevenue = premiumCount * premiumPrice;
        const goldRevenue = goldCount * goldPrice;
        const silverRevenue = silverCount * silverPrice;
        
        document.getElementById('premiumRevenue').textContent = premiumRevenue.toLocaleString();
        document.getElementById('goldRevenue').textContent = goldRevenue.toLocaleString();
        document.getElementById('silverRevenue').textContent = silverRevenue.toLocaleString();
        
        ticketRevenue = premiumRevenue + goldRevenue + silverRevenue;
        calculateTotalCost();
    }

    // Cost calculation
    function calculateTotalCost() {
        let cost = 0;
        
        // Base service fee
        cost += 10000;
        
        // Venue cost
        if (selectedVenue) {
            cost += calculateVenueTotal(selectedVenue);
        }
        
        // Band cost
        if (selectedBand) {
            const startTime = document.getElementById('startDateTime').value;
            const endTime = document.getElementById('endDateTime').value;
            
            if (startTime && endTime) {
                const start = new Date(startTime);
                const end = new Date(endTime);
                const hours = Math.ceil((end - start) / (1000 * 60 * 60));
                cost += selectedBand.pricePerHour * hours;
            } else {
                cost += selectedBand.pricePerHour * 8;
            }
        }
        
        // Decoration cost
        if (selectedDecor) {
            cost += selectedDecor.price;
        }
        
        // Food cost
        if (foodCount > 0) {
            const mealType = document.getElementById('mealType').value;
            let pricePerPerson = 75; // Default
            
            if (mealType === 'snacks') pricePerPerson = 50;
            else if (mealType === 'lunch') pricePerPerson = 120;
            else if (mealType === 'dinner') pricePerPerson = 150;
            else if (mealType === 'buffet') pricePerPerson = 200;
            
            cost += foodCount * pricePerPerson;
        }
        
        // Snacks cost
        cost += (snackQuantities.juice * 50) + (snackQuantities.softdrinks * 30) + (snackQuantities.snacks * 25);
        
        totalCost = cost;
        document.getElementById('sidebar-total').textContent = totalCost.toLocaleString();
    }

    // Summary functions
    function generateSummary() {
        generateEventInfo();
        generateVenueSummary();
        generateBandSummary();
        generateServicesSummary();
        generateTicketSalesSummary();
        generateInvestmentBreakdown();
    }

    function generateEventInfo() {
        const eventName = document.getElementById('eventName').value;
        const startTime = document.getElementById('startDateTime').value;
        const endTime = document.getElementById('endDateTime').value;
        
        let duration = '';
        if (startTime && endTime) {
            const start = new Date(startTime);
            const end = new Date(endTime);
            const hours = Math.ceil((end - start) / (1000 * 60 * 60));
            duration = `${hours} hours`;
        }
        
        document.getElementById('eventInfoSummary').innerHTML = `
            <p class="flex items-center">
                <svg class="w-4 h-4 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                </svg>
                <strong>Event:</strong> ${eventName}
            </p>
            <p class="flex items-center">
                <svg class="w-4 h-4 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <strong>Start:</strong> ${startTime ? new Date(startTime).toLocaleString() : 'Not set'}
            </p>
            <p class="flex items-center">
                <svg class="w-4 h-4 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                <strong>End:</strong> ${endTime ? new Date(endTime).toLocaleString() : 'Not set'}
            </p>
            <p class="flex items-center">
                <svg class="w-4 h-4 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <strong>Duration:</strong> ${duration || 'Not calculated'}
            </p>
            ${selectedDate ? `
            <p class="flex items-center">
                <svg class="w-4 h-4 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                <strong>Selected Date:</strong> ${selectedDate.toLocaleDateString()}
            </p>` : ''}
        `;
    }

    function generateVenueSummary() {
        if (selectedVenue) {
            document.getElementById('venueSummary').innerHTML = `
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    <strong>Venue:</strong> ${selectedVenue.name}
                </p>
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <strong>Location:</strong> ${selectedVenue.location}
                </p>
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <strong>Capacity:</strong> ${selectedVenue.capacity.toLocaleString()} guests
                </p>
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <strong>Cost:</strong> ₹${calculateVenueTotal(selectedVenue).toLocaleString()}
                </p>
            `;
        } else {
            document.getElementById('venueSummary').innerHTML = '<p class="text-purple-700">No venue selected</p>';
        }
    }

    function generateBandSummary() {
        if (selectedBand) {
            const startTime = document.getElementById('startDateTime').value;
            const endTime = document.getElementById('endDateTime').value;
            let bandCost = 0;
            
            if (startTime && endTime) {
                const start = new Date(startTime);
                const end = new Date(endTime);
                const hours = Math.ceil((end - start) / (1000 * 60 * 60));
                bandCost = selectedBand.pricePerHour * hours;
            } else {
                bandCost = selectedBand.pricePerHour * 8;
            }
            
            document.getElementById('bandSummary').innerHTML = `
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <strong>Band:</strong> ${selectedBand.name}
                </p>
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                    </svg>
                    <strong>Genre:</strong> ${selectedBand.genre}
                </p>
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <strong>Members:</strong> ${selectedBand.members}
                </p>
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <strong>Cost:</strong> ₹${bandCost.toLocaleString()}
                </p>
            `;
        } else {
            document.getElementById('bandSummary').innerHTML = '<p class="text-green-700">No band selected</p>';
        }
    }

    function generateServicesSummary() {
        let servicesHtml = '';
        
        if (selectedDecor) {
            servicesHtml += `
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-orange-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4 4 4 0 004-4V5z"></path>
                    </svg>
                    <strong>Decoration:</strong> ${selectedDecor.name} (${selectedDecor.style}) - ₹${selectedDecor.price.toLocaleString()}
                </p>
            `;
        }
        
        if (foodCount > 0) {
            const mealType = document.getElementById('mealType').value || 'Not specified';
            let pricePerPerson = 75;
            
            if (mealType === 'snacks') pricePerPerson = 50;
            else if (mealType === 'lunch') pricePerPerson = 120;
            else if (mealType === 'dinner') pricePerPerson = 150;
            else if (mealType === 'buffet') pricePerPerson = 200;
            
            const totalFoodCost = foodCount * pricePerPerson;
            
            servicesHtml += `
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-orange-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                    <strong>Food & Catering:</strong> ${mealType} for ${foodCount.toLocaleString()} people - ₹${totalFoodCost.toLocaleString()}
                </p>
            `;
        }
        
        const snackCost = (snackQuantities.juice * 50) + (snackQuantities.softdrinks * 30) + (snackQuantities.snacks * 25);
        if (snackCost > 0) {
            servicesHtml += `
                <p class="flex items-center">
                    <svg class="w-4 h-4 text-orange-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                    </svg>
                    <strong>Snacks & Beverages:</strong> ${snackQuantities.juice} Juice, ${snackQuantities.softdrinks} Soft Drinks, ${snackQuantities.snacks} Snacks - ₹${snackCost.toLocaleString()}
                </p>
            `;
        }
        
        if (!servicesHtml) {
            servicesHtml = '<p class="text-orange-700">No additional services selected</p>';
        }
        
        document.getElementById('servicesSummary').innerHTML = servicesHtml;
    }

    function generateTicketSalesSummary() {
        const isTicketsEnabled = document.getElementById('ticketBookingEnabled').value === 'yes';
        
        if (isTicketsEnabled) {
            const premiumCount = parseInt(document.getElementById('premiumCount').value) || 0;
            const premiumPrice = parseFloat(document.getElementById('premiumPrice').value) || 0;
            const goldCount = parseInt(document.getElementById('goldCount').value) || 0;
            const goldPrice = parseFloat(document.getElementById('goldPrice').value) || 0;
            const silverCount = parseInt(document.getElementById('silverCount').value) || 0;
            const silverPrice = parseFloat(document.getElementById('silverPrice').value) || 0;
            
            let ticketContent = '';
            
            if (premiumCount > 0 && premiumPrice > 0) {
                ticketContent += `
                    <div class="flex justify-between items-center bg-white p-4 rounded-lg">
                        <span class="font-semibold text-purple-700 flex items-center">
                            <svg class="w-4 h-4 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                            </svg>
                            Premium Tickets (${premiumCount})
                        </span>
                        <span class="text-2xl font-bold text-purple-800">₹${(premiumCount * premiumPrice).toLocaleString()}</span>
                    </div>
                `;
            }
            
            if (goldCount > 0 && goldPrice > 0) {
                ticketContent += `
                    <div class="flex justify-between items-center bg-white p-4 rounded-lg">
                        <span class="font-semibold text-purple-700 flex items-center">
                            <svg class="w-4 h-4 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                            </svg>
                            Gold Tickets (${goldCount})
                        </span>
                        <span class="text-2xl font-bold text-purple-800">₹${(goldCount * goldPrice).toLocaleString()}</span>
                    </div>
                `;
            }
            
            if (silverCount > 0 && silverPrice > 0) {
                ticketContent += `
                    <div class="flex justify-between items-center bg-white p-4 rounded-lg">
                        <span class="font-semibold text-purple-700 flex items-center">
                            <svg class="w-4 h-4 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                            Silver Tickets (${silverCount})
                        </span>
                        <span class="text-2xl font-bold text-purple-800">₹${(silverCount * silverPrice).toLocaleString()}</span>
                    </div>
                `;
            }
            
            if (ticketContent) {
                document.getElementById('ticketSalesContent').innerHTML = ticketContent;
                document.getElementById('ticketSalesSummary').classList.remove('hidden');
            } else {
                document.getElementById('ticketSalesSummary').classList.add('hidden');
            }
        } else {
            document.getElementById('ticketSalesSummary').classList.add('hidden');
        }
    }

    function generateInvestmentBreakdown() {
        const venueCost = selectedVenue ? calculateVenueTotal(selectedVenue) : 0;
        let bandCost = 0;
        if (selectedBand) {
            const startTime = document.getElementById('startDateTime').value;
            const endTime = document.getElementById('endDateTime').value;
            if (startTime && endTime) {
                const start = new Date(startTime);
                const end = new Date(endTime);
                const hours = Math.ceil((end - start) / (1000 * 60 * 60));
                bandCost = selectedBand.pricePerHour * hours;
            } else {
                bandCost = selectedBand.pricePerHour * 8;
            }
        }
        
        const decorCost = selectedDecor ? selectedDecor.price : 0;
        const snackCost = (snackQuantities.juice * 50) + (snackQuantities.softdrinks * 30) + (snackQuantities.snacks * 25);
        const baseFee = 10000;
        
        let foodCost = 0;
        if (foodCount > 0) {
            const mealType = document.getElementById('mealType').value;
            let pricePerPerson = 75;
            
            if (mealType === 'snacks') pricePerPerson = 50;
            else if (mealType === 'lunch') pricePerPerson = 120;
            else if (mealType === 'dinner') pricePerPerson = 150;
            else if (mealType === 'buffet') pricePerPerson = 200;
            
            foodCost = foodCount * pricePerPerson;
        }
        
        document.getElementById('investmentBreakdown').innerHTML = `
            <div class="flex justify-between items-center">
                <span class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0H8m8 0v2a2 2 0 01-2 2H10a2 2 0 01-2-2V6m8 0H8"></path>
                    </svg>
                    Base Service Fee:
                </span>
                <span class="font-semibold">₹${baseFee.toLocaleString()}</span>
            </div>
            ${selectedVenue ? `
            <div class="flex justify-between items-center">
                <span class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    Venue:
                </span>
                <span class="font-semibold">₹${venueCost.toLocaleString()}</span>
            </div>` : ''}
            ${selectedBand ? `
            <div class="flex justify-between items-center">
                <span class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                    </svg>
                    Band:
                </span>
                <span class="font-semibold">₹${bandCost.toLocaleString()}</span>
            </div>` : ''}
            ${selectedDecor ? `
            <div class="flex justify-between items-center">
                <span class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4 4 4 0 004-4V5z"></path>
                    </svg>
                    Decoration:
                </span>
                <span class="font-semibold">₹${decorCost.toLocaleString()}</span>
            </div>` : ''}
            ${foodCost > 0 ? `
            <div class="flex justify-between items-center">
                <span class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                    Food & Catering:
                </span>
                <span class="font-semibold">₹${foodCost.toLocaleString()}</span>
            </div>` : ''}
            ${snackCost > 0 ? `
            <div class="flex justify-between items-center">
                <span class="flex items-center">
                    <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                    </svg>
                    Snacks & Beverages:
                </span>
                <span class="font-semibold">₹${snackCost.toLocaleString()}</span>
            </div>` : ''}
            <div class="border-t-2 border-green-300 pt-3 mt-3">
                <div class="flex justify-between items-center">
                    <span class="text-xl font-bold text-green-800 flex items-center">
                        <svg class="w-5 h-5 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Total Investment:
                    </span>
                    <span class="text-2xl font-bold text-green-800">₹${totalCost.toLocaleString()}</span>
                </div>
                ${ticketRevenue > 0 ? `
                <div class="flex justify-between items-center mt-2">
                    <span class="text-lg font-semibold text-green-700 flex items-center">
                        <svg class="w-4 h-4 text-green-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                        Expected Revenue:
                    </span>
                    <span class="text-xl font-bold text-green-700">₹${ticketRevenue.toLocaleString()}</span>
                </div>
                <div class="flex justify-between items-center mt-2">
                    <span class="text-lg font-semibold ${ticketRevenue - totalCost >= 0 ? 'text-green-700' : 'text-red-700'} flex items-center">
                        <svg class="w-4 h-4 ${ticketRevenue - totalCost >= 0 ? 'text-green-600' : 'text-red-600'} mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Net ${ticketRevenue - totalCost >= 0 ? 'Profit' : 'Loss'}:
                    </span>
                    <span class="text-xl font-bold ${ticketRevenue - totalCost >= 0 ? 'text-green-700' : 'text-red-700'}">₹${Math.abs(ticketRevenue - totalCost).toLocaleString()}</span>
                </div>` : ''}
            </div>
        `;
    }

    // Modal functions
    function showBookingModal() {
        generateFinalSummary();
        document.getElementById('bookingModal').classList.remove('hidden');
        document.getElementById('bookingModal').classList.add('flex');
    }

    function hideBookingModal() {
        document.getElementById('bookingModal').classList.add('hidden');
        document.getElementById('bookingModal').classList.remove('flex');
    }

    function generateFinalSummary() {
        const userName = document.getElementById('userName').value;
        const userEmail = document.getElementById('userEmail').value;
        const userPhone = document.getElementById('userPhone').value;
        const eventName = document.getElementById('eventName').value;
        const selectedDateStr = selectedDate ? selectedDate.toLocaleDateString() : 'Not selected';
        
        document.getElementById('finalBookingSummary').innerHTML = `
            <div class="text-center mb-6">
                <div class="text-4xl text-purple-600 mb-2">
                    <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                </div>
                <h4 class="text-xl font-bold text-purple-800">Ready to confirm your concert booking?</h4>
                <p class="text-gray-600 mt-2">Review your details before proceeding to payment</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-gray-50 rounded-lg p-4">
                    <h5 class="font-bold text-gray-800 mb-2">Personal Information</h5>
                    <p><strong>Name:</strong> ${userName}</p>
                    <p><strong>Email:</strong> ${userEmail}</p>
                    <p><strong>Phone:</strong> ${userPhone}</p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-4">
                    <h5 class="font-bold text-gray-800 mb-2">Event Details</h5>
                    <p><strong>Event:</strong> ${eventName}</p>
                    <p><strong>Date:</strong> ${selectedDateStr}</p>
                    <p><strong>Venue:</strong> ${selectedVenue ? selectedVenue.name : 'None'}</p>
                    <p><strong>Band:</strong> ${selectedBand ? selectedBand.name : 'None'}</p>
                </div>
            </div>
            
            <div class="bg-purple-50 border-2 border-purple-300 rounded-lg p-4 mt-4">
                <div class="flex justify-between items-center">
                    <span class="text-xl font-bold text-purple-800">Total Cost:</span>
                    <span class="text-2xl font-bold text-purple-900">₹${totalCost.toLocaleString()}</span>
                </div>
                ${ticketRevenue > 0 ? `
                <div class="flex justify-between items-center mt-2">
                    <span class="font-semibold text-purple-700">Expected Revenue:</span>
                    <span class="text-lg font-bold text-purple-800">₹${ticketRevenue.toLocaleString()}</span>
                </div>` : ''}
                ${foodCount > 0 ? `
                <div class="flex justify-between items-center mt-2">
                    <span class="font-semibold text-purple-700">People Count:</span>
                    <span class="text-lg font-bold text-purple-800">${foodCount.toLocaleString()}</span>
                </div>` : ''}
            </div>
        `;
    }

    function confirmFinalBooking() {
        const selectedPayment = document.querySelector('input[name="paymentMethod"]:checked');
        
        if (!selectedPayment) {
            alert('Please select a payment method.');
            return;
        }
        
        alert(`🎉 Concert booking confirmed successfully!

Booking Details:
Event: ${document.getElementById('eventName').value}
Date: ${selectedDate ? selectedDate.toLocaleDateString() : 'TBD'}
Venue: ${selectedVenue ? selectedVenue.name : 'None'}
Band: ${selectedBand ? selectedBand.name : 'None'}
${selectedDecor ? `Decoration: ${selectedDecor.name}` : ''}
${foodCount > 0 ? `Food for: ${foodCount.toLocaleString()} people` : ''}
Total Cost: ₹${totalCost.toLocaleString()}
Payment: ${selectedPayment.value.toUpperCase()}

🎵 Your stage is set! See you at the concert!`);
        
        hideBookingModal();
    }

    // Initialize form on page load
    document.addEventListener('DOMContentLoaded', function() {
        const now = new Date();
        now.setHours(now.getHours() + 2);
        const minDateTime = now.toISOString().slice(0, 16);
        
        document.getElementById('startDateTime').min = minDateTime;
        document.getElementById('endDateTime').min = minDateTime;
        
        updateProgress();
    });
</script>
</body>
</html>
