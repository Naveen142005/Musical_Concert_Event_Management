<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thigalzhi Concert Management - Book Your Event</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://heroicons.com/svg">
    <style>
        .step-active { @apply bg-purple-600 text-white; }
        .step-completed { @apply bg-green-500 text-white; }
        .step-inactive { @apply bg-gray-200 text-gray-500; }
        .validation-error { @apply border-red-500 ring-red-500; }
        .validation-success { @apply border-green-500 ring-green-500; }
        .fade-in { @apply transition-all duration-300 opacity-100; }
        .fade-out { @apply transition-all duration-300 opacity-0; }
        .calendar-available { @apply bg-green-100 hover:bg-green-200 text-green-800; }
        .calendar-unavailable { @apply bg-red-100 text-red-400 cursor-not-allowed; }
        .calendar-selected { @apply bg-purple-600 text-white; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-purple-600 mb-2">Thigalzhi Concert Management</h1>
            <p class="text-gray-600">Book Your Perfect Concert Experience</p>
        </div>

        <!-- Progress Indicator -->
        <div class="flex justify-center mb-8">
            <div class="flex items-center space-x-4 overflow-x-auto pb-2">
                <div class="flex items-center space-x-2 step-indicator" data-step="1">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-active">1</div>
                    <span class="text-sm font-medium text-purple-600">Basic Details</span>
                </div>
                <div class="w-8 h-0.5 bg-gray-300"></div>
                <div class="flex items-center space-x-2 step-indicator" data-step="2">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-inactive">2</div>
                    <span class="text-sm font-medium text-gray-500">Venues & Bands</span>
                </div>
                <div class="w-8 h-0.5 bg-gray-300"></div>
                <div class="flex items-center space-x-2 step-indicator" data-step="3">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-inactive">3</div>
                    <span class="text-sm font-medium text-gray-500">Extras</span>
                </div>
                <div class="w-8 h-0.5 bg-gray-300"></div>
                <div class="flex items-center space-x-2 step-indicator" data-step="4">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-inactive">4</div>
                    <span class="text-sm font-medium text-gray-500">Calendar</span>
                </div>
                <div class="w-8 h-0.5 bg-gray-300"></div>
                <div class="flex items-center space-x-2 step-indicator" data-step="5">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-inactive">5</div>
                    <span class="text-sm font-medium text-gray-500">Ticketing</span>
                </div>
                <div class="w-8 h-0.5 bg-gray-300"></div>
                <div class="flex items-center space-x-2 step-indicator" data-step="6">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-inactive">6</div>
                    <span class="text-sm font-medium text-gray-500">Summary</span>
                </div>
                <div class="w-8 h-0.5 bg-gray-300"></div>
                <div class="flex items-center space-x-2 step-indicator" data-step="7">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-inactive">7</div>
                    <span class="text-sm font-medium text-gray-500">Payment</span>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Main Form Container -->
            <div class="lg:col-span-2">
                <form id="concertBookingForm" class="bg-white rounded-lg shadow-lg p-6">

                    <!-- Step 1: Basic Details -->
                    <div id="step1" class="step-content">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Basic Details</h2>

                        <div class="space-y-4">
                            <div>
                                <label for="fullName" class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                                <input type="text" id="fullName" name="fullName" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <div id="fullNameError" class="text-red-500 text-sm mt-1 hidden"></div>
                            </div>

                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address *</label>
                                <input type="email" id="email" name="email" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <div id="emailError" class="text-red-500 text-sm mt-1 hidden"></div>
                            </div>

                            <div>
                                <label for="mobile" class="block text-sm font-medium text-gray-700 mb-1">Mobile Number *</label>
                                <input type="tel" id="mobile" name="mobile" required placeholder="Enter 7-15 digits"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <div id="mobileError" class="text-red-500 text-sm mt-1 hidden"></div>
                            </div>

                            <fieldset class="space-y-2">
                                <legend class="text-sm font-medium text-gray-700">Concert Time Slot *</legend>
                                <div class="flex flex-wrap gap-4">
                                    <label class="flex items-center">
                                        <input type="radio" name="concertDay" value="morning" required class="mr-2 text-purple-600">
                                        <span class="text-sm">Morning</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="concertDay" value="afternoon" required class="mr-2 text-purple-600">
                                        <span class="text-sm">Afternoon</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="concertDay" value="night" required class="mr-2 text-purple-600">
                                        <span class="text-sm">Night</span>
                                    </label>
                                </div>
                                <div id="concertDayError" class="text-red-500 text-sm mt-1 hidden"></div>
                            </fieldset>
                        </div>

                        <div class="flex justify-end mt-6">
                            <button type="button" id="nextStep1" class="px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500">
                                Next
                            </button>
                        </div>
                    </div>

                    <!-- Step 2: Venues & Bands -->
                    <div id="step2" class="step-content hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Venues & Bands</h2>

                        <!-- Venue Section -->
                        <div class="mb-8">
                            <div class="flex items-center space-x-4 mb-4">
                                <span class="text-lg font-medium text-gray-900">Do you want a venue?</span>
                                <label class="flex items-center">
                                    <input type="radio" name="wantVenue" value="yes" class="mr-2 text-purple-600">
                                    <span class="text-sm">Yes</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="wantVenue" value="no" class="mr-2 text-purple-600">
                                    <span class="text-sm">No</span>
                                </label>
                            </div>

                            <div id="venueSection" class="hidden">
                                <!-- Venue Filters -->
                                <div class="bg-gray-50 p-4 rounded-lg mb-4">
                                    <h4 class="font-medium text-gray-900 mb-3">Filter Venues</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Min Price</label>
                                            <input type="number" id="venueMinPrice" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Max Price</label>
                                            <input type="number" id="venueMaxPrice" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                                            <input type="text" id="venueLocation" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Min Capacity</label>
                                            <input type="number" id="venueMinCapacity" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                    </div>
                                </div>

                                <!-- Venue List -->
                                <div id="venueList" class="space-y-4"></div>

                                <!-- Venue Pagination -->
                                <div id="venuePagination" class="flex justify-center mt-4"></div>
                            </div>
                        </div>

                        <!-- Band Section -->
                        <div class="mb-8">
                            <div class="flex items-center space-x-4 mb-4">
                                <span class="text-lg font-medium text-gray-900">Do you want a band?</span>
                                <label class="flex items-center">
                                    <input type="radio" name="wantBand" value="yes" class="mr-2 text-purple-600">
                                    <span class="text-sm">Yes</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="wantBand" value="no" class="mr-2 text-purple-600">
                                    <span class="text-sm">No</span>
                                </label>
                            </div>

                            <div id="bandSection" class="hidden">
                                <!-- Band Filters -->
                                <div class="bg-gray-50 p-4 rounded-lg mb-4">
                                    <h4 class="font-medium text-gray-900 mb-3">Filter Bands</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Min Price</label>
                                            <input type="number" id="bandMinPrice" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Max Price</label>
                                            <input type="number" id="bandMaxPrice" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Genre</label>
                                            <select id="bandGenre" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                                <option value="">All Genres</option>
                                                <option value="Rock">Rock</option>
                                                <option value="Pop">Pop</option>
                                                <option value="Jazz">Jazz</option>
                                                <option value="Classical">Classical</option>
                                                <option value="Electronic">Electronic</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Min Members</label>
                                            <input type="number" id="bandMinMembers" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                    </div>
                                </div>

                                <!-- Band List -->
                                <div id="bandList" class="space-y-4"></div>

                                <!-- Band Pagination -->
                                <div id="bandPagination" class="flex justify-center mt-4"></div>
                            </div>
                        </div>

                        <div class="flex justify-between mt-6">
                            <button type="button" id="prevStep2" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">
                                Previous
                            </button>
                            <button type="button" id="nextStep2" class="px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700">
                                Next
                            </button>
                        </div>
                    </div>

                    <!-- Step 3: Extras -->
                    <div id="step3" class="step-content hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Extras</h2>

                        <!-- Decoration Section -->
                        <div class="mb-8">
                            <div class="flex items-center space-x-4 mb-4">
                                <span class="text-lg font-medium text-gray-900">Do you want decorations?</span>
                                <label class="flex items-center">
                                    <input type="radio" name="wantDecoration" value="yes" class="mr-2 text-purple-600">
                                    <span class="text-sm">Yes</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="wantDecoration" value="no" class="mr-2 text-purple-600">
                                    <span class="text-sm">No</span>
                                </label>
                            </div>

                            <div id="decorationSection" class="hidden">
                                <!-- Decoration Filters -->
                                <div class="bg-gray-50 p-4 rounded-lg mb-4">
                                    <h4 class="font-medium text-gray-900 mb-3">Filter Decoration Teams</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Min Price</label>
                                            <input type="number" id="decorationMinPrice" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Max Price</label>
                                            <input type="number" id="decorationMaxPrice" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Package Type</label>
                                            <select id="decorationPackage" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                                                <option value="">All Packages</option>
                                                <option value="Basic">Basic</option>
                                                <option value="Premium">Premium</option>
                                                <option value="Luxury">Luxury</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Decoration List -->
                                <div id="decorationList" class="space-y-4"></div>

                                <!-- Decoration Pagination -->
                                <div id="decorationPagination" class="flex justify-center mt-4"></div>
                            </div>
                        </div>

                        <!-- Food Section -->
                        <div class="mb-8">
                            <div class="flex items-center space-x-4 mb-4">
                                <span class="text-lg font-medium text-gray-900">Do you want food/snacks?</span>
                                <label class="flex items-center">
                                    <input type="radio" name="wantFood" value="yes" class="mr-2 text-purple-600">
                                    <span class="text-sm">Yes</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="wantFood" value="no" class="mr-2 text-purple-600">
                                    <span class="text-sm">No</span>
                                </label>
                            </div>

                            <div id="foodSection" class="hidden">
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <label for="snackCount" class="block text-sm font-medium text-gray-700 mb-1">Number of Snack Boxes</label>
                                    <input type="number" id="snackCount" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                    <p class="text-sm text-gray-600 mt-1">Each snack box costs ₹500 and serves 5-8 people</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-between mt-6">
                            <button type="button" id="prevStep3" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">
                                Previous
                            </button>
                            <button type="button" id="nextStep3" class="px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700">
                                Next
                            </button>
                        </div>
                    </div>

                    <!-- Step 4: Calendar -->
                    <div id="step4" class="step-content hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Select Event Date</h2>

                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <button type="button" id="prevMonth" class="p-2 rounded-md border border-gray-300 hover:bg-gray-50">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                    </svg>
                                </button>
                                <h3 id="currentMonth" class="text-xl font-semibold text-gray-900"></h3>
                                <button type="button" id="nextMonth" class="p-2 rounded-md border border-gray-300 hover:bg-gray-50">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </button>
                            </div>

                            <div class="grid grid-cols-7 gap-1 mb-2">
                                <div class="p-2 text-center text-sm font-medium text-gray-500">Sun</div>
                                <div class="p-2 text-center text-sm font-medium text-gray-500">Mon</div>
                                <div class="p-2 text-center text-sm font-medium text-gray-500">Tue</div>
                                <div class="p-2 text-center text-sm font-medium text-gray-500">Wed</div>
                                <div class="p-2 text-center text-sm font-medium text-gray-500">Thu</div>
                                <div class="p-2 text-center text-sm font-medium text-gray-500">Fri</div>
                                <div class="p-2 text-center text-sm font-medium text-gray-500">Sat</div>
                            </div>

                            <div id="calendarGrid" class="grid grid-cols-7 gap-1"></div>
                        </div>

                        <div id="availabilityInfo" class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg hidden">
                            <h4 class="font-medium text-blue-900 mb-2">Availability Status</h4>
                            <div id="availabilityDetails"></div>
                        </div>

                        <div id="alternativeOptions" class="mb-6 hidden">
                            <h4 class="font-medium text-gray-900 mb-4">Alternative Options for Selected Date</h4>
                            <div id="alternativesList"></div>
                        </div>

                        <div class="flex justify-between mt-6">
                            <button type="button" id="prevStep4" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">
                                Previous
                            </button>
                            <button type="button" id="nextStep4" class="px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700" disabled>
                                Next
                            </button>
                        </div>
                    </div>

                    <!-- Step 5: Ticketing -->
                    <div id="step5" class="step-content hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Ticketing</h2>

                        <div class="mb-6">
                            <div class="flex items-center space-x-4 mb-4">
                                <span class="text-lg font-medium text-gray-900">Will you provide tickets?</span>
                                <label class="flex items-center">
                                    <input type="radio" name="provideTickets" value="yes" class="mr-2 text-purple-600">
                                    <span class="text-sm">Yes</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="provideTickets" value="no" class="mr-2 text-purple-600">
                                    <span class="text-sm">No</span>
                                </label>
                            </div>

                            <div id="ticketingSection" class="hidden space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <label for="platinumPrice" class="block text-sm font-medium text-gray-700 mb-1">Platinum Price (₹)</label>
                                        <input type="number" id="platinumPrice" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                        <div id="platinumPriceError" class="text-red-500 text-sm mt-1 hidden"></div>
                                    </div>
                                    <div>
                                        <label for="goldPrice" class="block text-sm font-medium text-gray-700 mb-1">Gold Price (₹)</label>
                                        <input type="number" id="goldPrice" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                        <div id="goldPriceError" class="text-red-500 text-sm mt-1 hidden"></div>
                                    </div>
                                    <div>
                                        <label for="silverPrice" class="block text-sm font-medium text-gray-700 mb-1">Silver Price (₹)</label>
                                        <input type="number" id="silverPrice" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                        <div id="silverPriceError" class="text-red-500 text-sm mt-1 hidden"></div>
                                    </div>
                                </div>

                                <div>
                                    <label for="ticketBookingDate" class="block text-sm font-medium text-gray-700 mb-1">Ticket Booking Opens On</label>
                                    <input type="datetime-local" id="ticketBookingDate" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                    <div id="ticketBookingDateError" class="text-red-500 text-sm mt-1 hidden"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-between mt-6">
                            <button type="button" id="prevStep5" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">
                                Previous
                            </button>
                            <button type="button" id="nextStep5" class="px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700">
                                Next
                            </button>
                        </div>
                    </div>

                    <!-- Step 6: Summary -->
                    <div id="step6" class="step-content hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Booking Summary</h2>

                        <div id="summaryContent" class="space-y-6">
                            <!-- Summary content will be generated dynamically -->
                        </div>

                        <div class="flex justify-between mt-6">
                            <button type="button" id="prevStep6" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">
                                Previous
                            </button>
                            <button type="button" id="nextStep6" class="px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700">
                                Go to Payment
                            </button>
                        </div>
                    </div>

                    <!-- Step 7: Payment -->
                    <div id="step7" class="step-content hidden">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Payment</h2>

                        <div class="space-y-6">
                            <div>
                                <h3 class="text-lg font-medium text-gray-900 mb-4">Payment Amount</h3>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="radio" name="paymentAmount" value="full" class="mr-3 text-purple-600" checked>
                                        <span>Full Amount: <span id="fullAmount" class="font-semibold"></span></span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="paymentAmount" value="deposit" class="mr-3 text-purple-600">
                                        <span>50% Deposit: <span id="depositAmount" class="font-semibold"></span></span>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-lg font-medium text-gray-900 mb-4">Payment Method</h3>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="radio" name="paymentMethod" value="upi" class="mr-3 text-purple-600" required>
                                        <span>UPI</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="paymentMethod" value="card" class="mr-3 text-purple-600" required>
                                        <span>Credit/Debit Card</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="paymentMethod" value="netbanking" class="mr-3 text-purple-600" required>
                                        <span>Net Banking</span>
                                    </label>
                                </div>
                                <div id="paymentMethodError" class="text-red-500 text-sm mt-1 hidden"></div>
                            </div>
                        </div>

                        <div class="flex justify-between mt-6">
                            <button type="button" id="prevStep7" class="px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400">
                                Previous
                            </button>
                            <button type="button" id="submitBooking" class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">
                                Complete Payment
                            </button>
                        </div>
                    </div>

                </form>
            </div>

            <!-- Summary Panel -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow-lg p-6 sticky top-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Booking Summary</h3>
                    <div id="liveSummary" class="space-y-3 text-sm">
                        <p class="text-gray-500">Complete the form to see your booking summary</p>
                    </div>
                    <div id="totalCost" class="mt-4 pt-4 border-t border-gray-200 hidden">
                        <div class="flex justify-between items-center">
                            <span class="font-semibold">Total Cost:</span>
                            <span id="totalAmount" class="font-bold text-purple-600 text-lg"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data Arrays
        const venuesData = [
            {
                id: 'madison-square',
                name: 'Madison Square Garden',
                location: 'New York',
                maxLimit: 20000,
                pricePerHour: 25000,
                rating: 4.7,
                bookedSlots: ["2025-12-09-morning", "2025-12-15-afternoon"]
            },
            {
                id: 'royal-opera',
                name: 'Royal Opera House',
                location: 'London',
                maxLimit: 2500,
                pricePerHour: 15000,
                rating: 4.9,
                bookedSlots: ["2025-12-10-night", "2025-12-20-morning"]
            },
            {
                id: 'sydney-opera',
                name: 'Sydney Opera House',
                location: 'Sydney',
                maxLimit: 5700,
                pricePerHour: 20000,
                rating: 4.8,
                bookedSlots: ["2025-12-12-afternoon"]
            },
            {
                id: 'carnegie-hall',
                name: 'Carnegie Hall',
                location: 'New York',
                maxLimit: 2800,
                pricePerHour: 18000,
                rating: 4.6,
                bookedSlots: ["2025-12-14-night"]
            },
            {
                id: 'red-rocks',
                name: 'Red Rocks Amphitheatre',
                location: 'Colorado',
                maxLimit: 9500,
                pricePerHour: 12000,
                rating: 4.9,
                bookedSlots: ["2025-12-16-morning", "2025-12-18-afternoon"]
            },
            {
                id: 'wembley-stadium',
                name: 'Wembley Stadium',
                location: 'London',
                maxLimit: 90000,
                pricePerHour: 50000,
                rating: 4.5,
                bookedSlots: ["2025-12-22-night"]
            },
            {
                id: 'hollywood-bowl',
                name: 'Hollywood Bowl',
                location: 'Los Angeles',
                maxLimit: 17500,
                pricePerHour: 22000,
                rating: 4.7,
                bookedSlots: ["2025-12-25-afternoon"]
            }
        ];

        const bandsData = [
            {
                id: 'rock-legends',
                name: 'The Rock Legends',
                genre: 'Rock',
                members: 5,
                pricePerHour: 35000,
                rating: 4.8,
                bookedSlots: ["2025-12-09-morning", "2025-12-15-night"]
            },
            {
                id: 'jazz-masters',
                name: 'Jazz Masters Collective',
                genre: 'Jazz',
                members: 7,
                pricePerHour: 28000,
                rating: 4.6,
                bookedSlots: ["2025-12-10-afternoon", "2025-12-20-morning"]
            },
            {
                id: 'pop-stars',
                name: 'Pop Stars United',
                genre: 'Pop',
                members: 4,
                pricePerHour: 45000,
                rating: 4.9,
                bookedSlots: ["2025-12-12-night"]
            },
            {
                id: 'classical-symphony',
                name: 'Classical Symphony Orchestra',
                genre: 'Classical',
                members: 35,
                pricePerHour: 55000,
                rating: 4.7,
                bookedSlots: ["2025-12-14-morning"]
            },
            {
                id: 'electronic-beats',
                name: 'Electronic Beats Crew',
                genre: 'Electronic',
                members: 3,
                pricePerHour: 32000,
                rating: 4.5,
                bookedSlots: ["2025-12-16-afternoon", "2025-12-18-night"]
            },
            {
                id: 'indie-rockers',
                name: 'Indie Rockers Band',
                genre: 'Rock',
                members: 4,
                pricePerHour: 25000,
                rating: 4.4,
                bookedSlots: ["2025-12-22-morning"]
            },
            {
                id: 'world-fusion',
                name: 'World Fusion Ensemble',
                genre: 'World',
                members: 8,
                pricePerHour: 30000,
                rating: 4.6,
                bookedSlots: ["2025-12-25-night"]
            }
        ];

        const decorationData = [
            {
                id: 'luxury-events',
                teamName: 'Luxury Events Co.',
                packageType: 'Premium',
                pricePerEvent: 85000,
                specialties: ['LED Lighting', 'Stage Design', 'Floral Arrangements'],
                rating: 4.6,
                bookedSlots: ["2025-12-09-morning", "2025-12-15-afternoon"]
            },
            {
                id: 'creative-designs',
                teamName: 'Creative Designs Studio',
                packageType: 'Basic',
                pricePerEvent: 45000,
                specialties: ['Backdrop Design', 'Balloon Arrangements'],
                rating: 4.3,
                bookedSlots: ["2025-12-10-night", "2025-12-20-morning"]
            },
            {
                id: 'elite-decorators',
                teamName: 'Elite Decorators',
                packageType: 'Luxury',
                pricePerEvent: 120000,
                specialties: ['3D Stage Design', 'Holographic Displays', 'Custom Installations'],
                rating: 4.9,
                bookedSlots: ["2025-12-12-afternoon"]
            },
            {
                id: 'party-planners',
                teamName: 'Party Planners Plus',
                packageType: 'Premium',
                pricePerEvent: 75000,
                specialties: ['Theme Decoration', 'Audio Visual Setup'],
                rating: 4.5,
                bookedSlots: ["2025-12-14-night"]
            },
            {
                id: 'budget-decorators',
                teamName: 'Budget Friendly Decorators',
                packageType: 'Basic',
                pricePerEvent: 35000,
                specialties: ['Simple Lighting', 'Banner Setup'],
                rating: 4.0,
                bookedSlots: ["2025-12-16-morning", "2025-12-18-afternoon"]
            },
            {
                id: 'grand-events',
                teamName: 'Grand Events Management',
                packageType: 'Luxury',
                pricePerEvent: 150000,
                specialties: ['Drone Light Shows', 'Pyrotechnics', 'Celebrity Appearances'],
                rating: 4.8,
                bookedSlots: ["2025-12-22-night"]
            }
        ];

        // Global Variables
        let currentStep = 1;
        let bookingData = {
            basicDetails: {},
            selectedVenue: null,
            selectedBands: [],
            selectedDecoration: null,
            snackCount: 0,
            selectedDate: null,
            selectedSlot: null,
            ticketing: {},
            payment: {}
        };
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let currentVenuePage = 1;
        let currentBandPage = 1;
        let currentDecorationPage = 1;
        const itemsPerPage = 5;

        // Utility Functions
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validatePhone(phone) {
            const digits = phone.replace(/\D/g, '');
            return digits.length >= 7 && digits.length <= 15;
        }

        function showError(fieldId, message) {
            const errorElement = document.getElementById(fieldId + 'Error');
            const inputElement = document.getElementById(fieldId);
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
            }
            if (inputElement) {
                inputElement.classList.add('validation-error');
            }
        }

        function clearError(fieldId) {
            const errorElement = document.getElementById(fieldId + 'Error');
            const inputElement = document.getElementById(fieldId);
            if (errorElement) {
                errorElement.classList.add('hidden');
            }
            if (inputElement) {
                inputElement.classList.remove('validation-error');
                inputElement.classList.add('validation-success');
            }
        }

        function updateStepIndicator(step) {
            document.querySelectorAll('.step-indicator').forEach(indicator => {
                const stepNum = parseInt(indicator.dataset.step);
                const circle = indicator.querySelector('div');
                const text = indicator.querySelector('span');

                if (stepNum < step) {
                    circle.className = 'w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-completed';
                    text.className = 'text-sm font-medium text-green-600';
                } else if (stepNum === step) {
                    circle.className = 'w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-active';
                    text.className = 'text-sm font-medium text-purple-600';
                } else {
                    circle.className = 'w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold step-inactive';
                    text.className = 'text-sm font-medium text-gray-500';
                }
            });
        }

        function showStep(step) {
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById('step' + step).classList.remove('hidden');
            updateStepIndicator(step);
            currentStep = step;
        }

        function updateLiveSummary() {
            const summaryElement = document.getElementById('liveSummary');
            const totalCostElement = document.getElementById('totalCost');
            const totalAmountElement = document.getElementById('totalAmount');

            let html = '';
            let totalCost = 0;

            // Basic Details
            if (bookingData.basicDetails.fullName) {
                html += '<div><strong>Customer:</strong> ' + bookingData.basicDetails.fullName + '</div>';
                html += '<div><strong>Email:</strong> ' + bookingData.basicDetails.email + '</div>';
                html += '<div><strong>Mobile:</strong> ' + bookingData.basicDetails.mobile + '</div>';
                html += '<div><strong>Time Slot:</strong> ' + (bookingData.basicDetails.concertDay || 'Not selected').charAt(0).toUpperCase() + (bookingData.basicDetails.concertDay || 'Not selected').slice(1) + '</div>';
            }

            // Venue
            if (bookingData.selectedVenue) {
                html += '<div><strong>Venue:</strong> ' + bookingData.selectedVenue.name + '</div>';
                html += '<div><strong>Location:</strong> ' + bookingData.selectedVenue.location + '</div>';
                totalCost += bookingData.selectedVenue.pricePerHour * 4; // Assuming 4-hour event
            }

            // Bands
            if (bookingData.selectedBands.length > 0) {
                html += '<div><strong>Band(s):</strong></div>';
                bookingData.selectedBands.forEach(band => {
                    html += '<div class="ml-4">• ' + band.name + ' (' + band.genre + ')</div>';
                    totalCost += band.pricePerHour * 4; // Assuming 4-hour event
                });
            }

            // Decoration
            if (bookingData.selectedDecoration) {
                html += '<div><strong>Decoration:</strong> ' + bookingData.selectedDecoration.teamName + '</div>';
                totalCost += bookingData.selectedDecoration.pricePerEvent;
            }

            // Snacks
            if (bookingData.snackCount > 0) {
                html += '<div><strong>Snack Boxes:</strong> ' + bookingData.snackCount + '</div>';
                totalCost += bookingData.snackCount * 500;
            }

            // Event Date
            if (bookingData.selectedDate) {
                html += '<div><strong>Event Date:</strong> ' + bookingData.selectedDate + ' (' + bookingData.selectedSlot + ')</div>';
            }

            summaryElement.innerHTML = html || '<p class="text-gray-500">Complete the form to see your booking summary</p>';

            if (totalCost > 0) {
                totalCostElement.classList.remove('hidden');
                totalAmountElement.textContent = '₹' + totalCost.toLocaleString();
            } else {
                totalCostElement.classList.add('hidden');
            }
        }

        // Step 1 Validation
        function validateStep1() {
            let isValid = true;

            const fullName = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim();
            const mobile = document.getElementById('mobile').value.trim();
            const concertDay = document.querySelector('input[name="concertDay"]:checked');

            if (!fullName) {
                showError('fullName', 'Full name is required');
                isValid = false;
            } else {
                clearError('fullName');
            }

            if (!email) {
                showError('email', 'Email is required');
                isValid = false;
            } else if (!validateEmail(email)) {
                showError('email', 'Please enter a valid email address');
                isValid = false;
            } else {
                clearError('email');
            }

            if (!mobile) {
                showError('mobile', 'Mobile number is required');
                isValid = false;
            } else if (!validatePhone(mobile)) {
                showError('mobile', 'Mobile number must be 7-15 digits');
                isValid = false;
            } else {
                clearError('mobile');
            }

            if (!concertDay) {
                showError('concertDay', 'Please select a concert time slot');
                isValid = false;
            } else {
                clearError('concertDay');
            }

            if (isValid) {
                bookingData.basicDetails = {
                    fullName,
                    email,
                    mobile,
                    concertDay: concertDay.value
                };
                updateLiveSummary();
            }

            return isValid;
        }

        // Pagination Functions
        function createPagination(currentPage, totalPages, containerId, onPageChange) {
            const container = document.getElementById(containerId);
            let html = '<div class="flex space-x-1 justify-center">';

            // Previous button
            if (currentPage > 1) {
                html += '<button class="px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50" onclick="' + onPageChange + '(' + (currentPage - 1) + ')">Previous</button>';
            }

            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                const activeClass = i === currentPage ? 'bg-purple-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50';
                html += '<button class="px-3 py-2 border border-gray-300 rounded-md text-sm ' + activeClass + '" onclick="' + onPageChange + '(' + i + ')">' + i + '</button>';
            }

            // Next button
            if (currentPage < totalPages) {
                html += '<button class="px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50" onclick="' + onPageChange + '(' + (currentPage + 1) + ')">Next</button>';
            }

            html += '</div>';
            container.innerHTML = html;
        }

        // Venue Functions
        function filterVenues() {
            const minPrice = parseFloat(document.getElementById('venueMinPrice').value) || 0;
            const maxPrice = parseFloat(document.getElementById('venueMaxPrice').value) || Infinity;
            const location = document.getElementById('venueLocation').value.toLowerCase();
            const minCapacity = parseFloat(document.getElementById('venueMinCapacity').value) || 0;

            return venuesData.filter(venue => {
                return venue.pricePerHour >= minPrice &&
                       venue.pricePerHour <= maxPrice &&
                       venue.location.toLowerCase().includes(location) &&
                       venue.maxLimit >= minCapacity;
            });
        }

        function renderVenues() {
            const filteredVenues = filterVenues();
            const totalPages = Math.ceil(filteredVenues.length / itemsPerPage);
            const startIndex = (currentVenuePage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const venuesForPage = filteredVenues.slice(startIndex, endIndex);

            const container = document.getElementById('venueList');
            let html = '';

            venuesForPage.forEach(venue => {
                const isSelected = bookingData.selectedVenue && bookingData.selectedVenue.id === venue.id;
                const selectedClass = isSelected ? 'ring-2 ring-purple-500 bg-purple-50' : '';

                html += `
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow ${selectedClass}">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-gray-900">${venue.name}</h4>
                                <p class="text-sm text-gray-600">${venue.location}</p>
                                <p class="text-sm text-gray-600">Capacity: ${venue.maxLimit.toLocaleString()}</p>
                                <p class="text-sm text-gray-600">Rating: ${venue.rating}/5 ⭐</p>
                                <p class="text-lg font-semibold text-purple-600 mt-2">₹${venue.pricePerHour.toLocaleString()}/hour</p>
                            </div>
                            <button onclick="selectVenue('${venue.id}')" 
                                class="px-4 py-2 ${isSelected ? 'bg-purple-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-purple-600 hover:text-white'} rounded-md text-sm transition-colors">
                                ${isSelected ? 'Selected' : 'Select'}
                            </button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html || '<p class="text-gray-500 text-center py-8">No venues found matching your criteria.</p>';

            if (totalPages > 1) {
                createPagination(currentVenuePage, totalPages, 'venuePagination', 'changeVenuePage');
            } else {
                document.getElementById('venuePagination').innerHTML = '';
            }
        }

        function selectVenue(venueId) {
            const venue = venuesData.find(v => v.id === venueId);
            bookingData.selectedVenue = venue;
            renderVenues();
            updateLiveSummary();
        }

        function changeVenuePage(page) {
            currentVenuePage = page;
            renderVenues();
        }

        // Band Functions
        function filterBands() {
            const minPrice = parseFloat(document.getElementById('bandMinPrice').value) || 0;
            const maxPrice = parseFloat(document.getElementById('bandMaxPrice').value) || Infinity;
            const genre = document.getElementById('bandGenre').value;
            const minMembers = parseFloat(document.getElementById('bandMinMembers').value) || 0;

            return bandsData.filter(band => {
                return band.pricePerHour >= minPrice &&
                       band.pricePerHour <= maxPrice &&
                       (genre === '' || band.genre === genre) &&
                       band.members >= minMembers;
            });
        }

        function renderBands() {
            const filteredBands = filterBands();
            const totalPages = Math.ceil(filteredBands.length / itemsPerPage);
            const startIndex = (currentBandPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const bandsForPage = filteredBands.slice(startIndex, endIndex);

            const container = document.getElementById('bandList');
            let html = '';

            bandsForPage.forEach(band => {
                const isSelected = bookingData.selectedBands.some(b => b.id === band.id);
                const selectedClass = isSelected ? 'ring-2 ring-purple-500 bg-purple-50' : '';

                html += `
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow ${selectedClass}">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-gray-900">${band.name}</h4>
                                <p class="text-sm text-gray-600">Genre: ${band.genre}</p>
                                <p class="text-sm text-gray-600">Members: ${band.members}</p>
                                <p class="text-sm text-gray-600">Rating: ${band.rating}/5 ⭐</p>
                                <p class="text-lg font-semibold text-purple-600 mt-2">₹${band.pricePerHour.toLocaleString()}/hour</p>
                            </div>
                            <button onclick="selectBand('${band.id}')" 
                                class="px-4 py-2 ${isSelected ? 'bg-purple-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-purple-600 hover:text-white'} rounded-md text-sm transition-colors">
                                ${isSelected ? 'Selected' : 'Select'}
                            </button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html || '<p class="text-gray-500 text-center py-8">No bands found matching your criteria.</p>';

            if (totalPages > 1) {
                createPagination(currentBandPage, totalPages, 'bandPagination', 'changeBandPage');
            } else {
                document.getElementById('bandPagination').innerHTML = '';
            }
        }

        function selectBand(bandId) {
            const band = bandsData.find(b => b.id === bandId);
            const existingIndex = bookingData.selectedBands.findIndex(b => b.id === bandId);

            if (existingIndex > -1) {
                bookingData.selectedBands.splice(existingIndex, 1);
            } else {
                // For single selection, clear existing bands first
                bookingData.selectedBands = [band];
            }

            renderBands();
            updateLiveSummary();
        }

        function changeBandPage(page) {
            currentBandPage = page;
            renderBands();
        }

        // Decoration Functions
        function filterDecorations() {
            const minPrice = parseFloat(document.getElementById('decorationMinPrice').value) || 0;
            const maxPrice = parseFloat(document.getElementById('decorationMaxPrice').value) || Infinity;
            const packageType = document.getElementById('decorationPackage').value;

            return decorationData.filter(decoration => {
                return decoration.pricePerEvent >= minPrice &&
                       decoration.pricePerEvent <= maxPrice &&
                       (packageType === '' || decoration.packageType === packageType);
            });
        }

        function renderDecorations() {
            const filteredDecorations = filterDecorations();
            const totalPages = Math.ceil(filteredDecorations.length / itemsPerPage);
            const startIndex = (currentDecorationPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const decorationsForPage = filteredDecorations.slice(startIndex, endIndex);

            const container = document.getElementById('decorationList');
            let html = '';

            decorationsForPage.forEach(decoration => {
                const isSelected = bookingData.selectedDecoration && bookingData.selectedDecoration.id === decoration.id;
                const selectedClass = isSelected ? 'ring-2 ring-purple-500 bg-purple-50' : '';

                html += `
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow ${selectedClass}">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-gray-900">${decoration.teamName}</h4>
                                <p class="text-sm text-gray-600">Package: ${decoration.packageType}</p>
                                <p class="text-sm text-gray-600">Rating: ${decoration.rating}/5 ⭐</p>
                                <p class="text-sm text-gray-600">Specialties: ${decoration.specialties.join(', ')}</p>
                                <p class="text-lg font-semibold text-purple-600 mt-2">₹${decoration.pricePerEvent.toLocaleString()}/event</p>
                            </div>
                            <button onclick="selectDecoration('${decoration.id}')" 
                                class="px-4 py-2 ${isSelected ? 'bg-purple-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-purple-600 hover:text-white'} rounded-md text-sm transition-colors">
                                ${isSelected ? 'Selected' : 'Select'}
                            </button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html || '<p class="text-gray-500 text-center py-8">No decoration teams found matching your criteria.</p>';

            if (totalPages > 1) {
                createPagination(currentDecorationPage, totalPages, 'decorationPagination', 'changeDecorationPage');
            } else {
                document.getElementById('decorationPagination').innerHTML = '';
            }
        }

        function selectDecoration(decorationId) {
            const decoration = decorationData.find(d => d.id === decorationId);
            bookingData.selectedDecoration = decoration;
            renderDecorations();
            updateLiveSummary();
        }

        function changeDecorationPage(page) {
            currentDecorationPage = page;
            renderDecorations();
        }

        // Calendar Functions
        function checkAvailability(date, slot) {
            const dateSlot = date + '-' + slot;
            const selectedItems = [];

            if (bookingData.selectedVenue) selectedItems.push(bookingData.selectedVenue);
            if (bookingData.selectedBands.length > 0) selectedItems.push(...bookingData.selectedBands);
            if (bookingData.selectedDecoration) selectedItems.push(bookingData.selectedDecoration);

            return selectedItems.every(item => !item.bookedSlots.includes(dateSlot));
        }

        function getUnavailableItems(date, slot) {
            const dateSlot = date + '-' + slot;
            const unavailable = [];

            if (bookingData.selectedVenue && bookingData.selectedVenue.bookedSlots.includes(dateSlot)) {
                unavailable.push({type: 'venue', item: bookingData.selectedVenue});
            }

            bookingData.selectedBands.forEach(band => {
                if (band.bookedSlots.includes(dateSlot)) {
                    unavailable.push({type: 'band', item: band});
                }
            });

            if (bookingData.selectedDecoration && bookingData.selectedDecoration.bookedSlots.includes(dateSlot)) {
                unavailable.push({type: 'decoration', item: bookingData.selectedDecoration});
            }

            return unavailable;
        }

        function renderCalendar() {
            const monthNames = ["January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"];

            document.getElementById('currentMonth').textContent = monthNames[currentMonth] + ' ' + currentYear;

            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const today = new Date();

            const grid = document.getElementById('calendarGrid');
            let html = '';

            // Empty cells for previous month
            for (let i = 0; i < firstDay; i++) {
                html += '<div class="p-2"></div>';
            }

            // Days of current month
            for (let day = 1; day <= daysInMonth; day++) {
                const date = currentYear + '-' + String(currentMonth + 1).padStart(2, '0') + '-' + String(day).padStart(2, '0');
                const dateObj = new Date(currentYear, currentMonth, day);
                const isPast = dateObj < today;
                const selectedSlot = bookingData.basicDetails.concertDay || '';

                let cellClass = 'p-2 text-center text-sm border border-gray-200 cursor-pointer hover:bg-gray-100 ';
                let isSelectable = false;

                if (isPast) {
                    cellClass += 'text-gray-400 cursor-not-allowed ';
                } else if (selectedSlot && checkAvailability(date, selectedSlot)) {
                    cellClass += 'calendar-available ';
                    isSelectable = true;
                } else if (selectedSlot) {
                    cellClass += 'calendar-unavailable ';
                } else {
                    cellClass += 'text-gray-700 ';
                }

                if (bookingData.selectedDate === date && bookingData.selectedSlot === selectedSlot) {
                    cellClass += 'calendar-selected ';
                }

                const onClick = (isPast || !selectedSlot) ? '' : `onclick="selectDate('${date}', '${selectedSlot}')"`;
                html += `<div class="${cellClass}" ${onClick}>${day}</div>`;
            }

            grid.innerHTML = html;
        }

        function selectDate(date, slot) {
            if (checkAvailability(date, slot)) {
                bookingData.selectedDate = date;
                bookingData.selectedSlot = slot;
                document.getElementById('nextStep4').disabled = false;
                document.getElementById('nextStep4').classList.remove('opacity-50', 'cursor-not-allowed');
                updateLiveSummary();
                renderCalendar();
            } else {
                // Show alternatives
                showAlternatives(date, slot);
            }
        }

        function showAlternatives(date, slot) {
            const unavailableItems = getUnavailableItems(date, slot);
            const alternativesDiv = document.getElementById('alternativeOptions');
            const alternativesList = document.getElementById('alternativesList');

            if (unavailableItems.length > 0) {
                alternativesDiv.classList.remove('hidden');
                let html = '<div class="space-y-4">';

                unavailableItems.forEach(unavailable => {
                    const { type, item } = unavailable;
                    let alternatives = [];

                    if (type === 'venue') {
                        alternatives = venuesData.filter(v => v.id !== item.id && !v.bookedSlots.includes(date + '-' + slot));
                    } else if (type === 'band') {
                        alternatives = bandsData.filter(b => b.id !== item.id && !b.bookedSlots.includes(date + '-' + slot));
                    } else if (type === 'decoration') {
                        alternatives = decorationData.filter(d => d.id !== item.id && !d.bookedSlots.includes(date + '-' + slot));
                    }

                    html += `<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">`;
                    html += `<h5 class="font-medium text-yellow-900 mb-2">${item.name || item.teamName} is not available</h5>`;
                    html += `<p class="text-sm text-yellow-800 mb-3">Alternative ${type}s available for ${date} (${slot}):</p>`;

                    if (alternatives.length > 0) {
                        alternatives.slice(0, 3).forEach(alt => {
                            const price = alt.pricePerHour || alt.pricePerEvent;
                            html += `<div class="bg-white p-2 rounded border mb-2 flex justify-between items-center">`;
                            html += `<div>`;
                            html += `<div class="font-medium">${alt.name || alt.teamName}</div>`;
                            html += `<div class="text-sm text-gray-600">₹${price.toLocaleString()}${alt.pricePerHour ? '/hour' : '/event'}</div>`;
                            html += `</div>`;
                            html += `<button onclick="replaceItem('${type}', '${alt.id}', '${date}', '${slot}')" class="px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700">Select</button>`;
                            html += `</div>`;
                        });
                    } else {
                        html += `<p class="text-sm text-gray-600">No alternatives available for this date.</p>`;
                    }

                    html += `</div>`;
                });

                html += '</div>';
                alternativesList.innerHTML = html;
            } else {
                alternativesDiv.classList.add('hidden');
            }
        }

        function replaceItem(type, itemId, date, slot) {
            if (type === 'venue') {
                const newVenue = venuesData.find(v => v.id === itemId);
                bookingData.selectedVenue = newVenue;
            } else if (type === 'band') {
                const newBand = bandsData.find(b => b.id === itemId);
                bookingData.selectedBands = [newBand];
            } else if (type === 'decoration') {
                const newDecoration = decorationData.find(d => d.id === itemId);
                bookingData.selectedDecoration = newDecoration;
            }

            updateLiveSummary();
            renderCalendar();
            selectDate(date, slot);
        }

        // Ticketing Validation
        function validateTicketing() {
            const provideTickets = document.querySelector('input[name="provideTickets"]:checked');

            if (provideTickets && provideTickets.value === 'yes') {
                const platinum = parseFloat(document.getElementById('platinumPrice').value) || 0;
                const gold = parseFloat(document.getElementById('goldPrice').value) || 0;
                const silver = parseFloat(document.getElementById('silverPrice').value) || 0;
                const bookingDate = document.getElementById('ticketBookingDate').value;

                let isValid = true;

                if (platinum > 0 && gold > 0 && silver > 0) {
                    if (platinum <= gold || gold <= silver) {
                        showError('platinumPrice', 'Platinum price should be higher than Gold and Silver');
                        showError('goldPrice', 'Gold price should be higher than Silver but lower than Platinum');
                        showError('silverPrice', 'Silver price should be lower than Gold and Platinum');
                        isValid = false;
                    } else {
                        clearError('platinumPrice');
                        clearError('goldPrice');
                        clearError('silverPrice');
                    }
                }

                if (bookingDate) {
                    const selectedBookingDate = new Date(bookingDate);
                    const eventDate = new Date(bookingData.selectedDate);
                    const now = new Date();

                    if (selectedBookingDate <= now) {
                        showError('ticketBookingDate', 'Booking date must be after current date');
                        isValid = false;
                    } else if (selectedBookingDate >= eventDate) {
                        showError('ticketBookingDate', 'Booking date must be before event date');
                        isValid = false;
                    } else {
                        clearError('ticketBookingDate');
                    }
                }

                if (isValid) {
                    bookingData.ticketing = {
                        provideTickets: true,
                        platinumPrice: platinum,
                        goldPrice: gold,
                        silverPrice: silver,
                        bookingOpenDate: bookingDate
                    };
                }

                return isValid;
            } else {
                bookingData.ticketing = { provideTickets: false };
                return true;
            }
        }

        // Summary Generation
        function generateSummary() {
            const summaryContent = document.getElementById('summaryContent');
            let html = '';
            let totalCost = 0;

            // Basic Details
            html += '<div class="bg-gray-50 p-4 rounded-lg">';
            html += '<h3 class="font-semibold text-gray-900 mb-2">Customer Information</h3>';
            html += '<div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">';
            html += '<div><strong>Name:</strong> ' + bookingData.basicDetails.fullName + '</div>';
            html += '<div><strong>Email:</strong> ' + bookingData.basicDetails.email + '</div>';
            html += '<div><strong>Mobile:</strong> ' + bookingData.basicDetails.mobile + '</div>';
            html += '<div><strong>Time Slot:</strong> ' + bookingData.basicDetails.concertDay.charAt(0).toUpperCase() + bookingData.basicDetails.concertDay.slice(1) + '</div>';
            html += '</div></div>';

            // Event Details
            html += '<div class="bg-gray-50 p-4 rounded-lg">';
            html += '<h3 class="font-semibold text-gray-900 mb-2">Event Details</h3>';
            html += '<div class="text-sm space-y-1">';
            html += '<div><strong>Date:</strong> ' + (bookingData.selectedDate || 'Not selected') + '</div>';
            html += '<div><strong>Time Slot:</strong> ' + (bookingData.selectedSlot || 'Not selected') + '</div>';
            html += '</div></div>';

            // Selected Services
            html += '<div class="bg-gray-50 p-4 rounded-lg">';
            html += '<h3 class="font-semibold text-gray-900 mb-2">Selected Services</h3>';
            html += '<div class="space-y-3 text-sm">';

            if (bookingData.selectedVenue) {
                const venueCost = bookingData.selectedVenue.pricePerHour * 4;
                html += '<div class="flex justify-between border-b border-gray-200 pb-2">';
                html += '<div><strong>Venue:</strong> ' + bookingData.selectedVenue.name + '<br><span class="text-gray-600">' + bookingData.selectedVenue.location + ' (4 hours)</span></div>';
                html += '<div class="font-semibold">₹' + venueCost.toLocaleString() + '</div>';
                html += '</div>';
                totalCost += venueCost;
            }

            bookingData.selectedBands.forEach(band => {
                const bandCost = band.pricePerHour * 4;
                html += '<div class="flex justify-between border-b border-gray-200 pb-2">';
                html += '<div><strong>Band:</strong> ' + band.name + '<br><span class="text-gray-600">' + band.genre + ' (4 hours)</span></div>';
                html += '<div class="font-semibold">₹' + bandCost.toLocaleString() + '</div>';
                html += '</div>';
                totalCost += bandCost;
            });

            if (bookingData.selectedDecoration) {
                html += '<div class="flex justify-between border-b border-gray-200 pb-2">';
                html += '<div><strong>Decoration:</strong> ' + bookingData.selectedDecoration.teamName + '<br><span class="text-gray-600">' + bookingData.selectedDecoration.packageType + ' Package</span></div>';
                html += '<div class="font-semibold">₹' + bookingData.selectedDecoration.pricePerEvent.toLocaleString() + '</div>';
                html += '</div>';
                totalCost += bookingData.selectedDecoration.pricePerEvent;
            }

            if (bookingData.snackCount > 0) {
                const snackCost = bookingData.snackCount * 500;
                html += '<div class="flex justify-between border-b border-gray-200 pb-2">';
                html += '<div><strong>Snack Boxes:</strong> ' + bookingData.snackCount + ' boxes</div>';
                html += '<div class="font-semibold">₹' + snackCost.toLocaleString() + '</div>';
                html += '</div>';
                totalCost += snackCost;
            }

            html += '</div></div>';

            // Ticketing
            if (bookingData.ticketing.provideTickets) {
                html += '<div class="bg-gray-50 p-4 rounded-lg">';
                html += '<h3 class="font-semibold text-gray-900 mb-2">Ticketing Information</h3>';
                html += '<div class="grid grid-cols-3 gap-4 text-sm">';
                html += '<div><strong>Platinum:</strong> ₹' + bookingData.ticketing.platinumPrice + '</div>';
                html += '<div><strong>Gold:</strong> ₹' + bookingData.ticketing.goldPrice + '</div>';
                html += '<div><strong>Silver:</strong> ₹' + bookingData.ticketing.silverPrice + '</div>';
                html += '</div>';
                html += '<div class="text-sm mt-2"><strong>Booking Opens:</strong> ' + new Date(bookingData.ticketing.bookingOpenDate).toLocaleString() + '</div>';
                html += '</div>';
            }

            // Total Cost
            html += '<div class="bg-purple-50 border border-purple-200 p-4 rounded-lg">';
            html += '<div class="flex justify-between items-center">';
            html += '<h3 class="text-xl font-bold text-purple-900">Total Event Cost</h3>';
            html += '<div class="text-2xl font-bold text-purple-600">₹' + totalCost.toLocaleString() + '</div>';
            html += '</div>';
            html += '</div>';

            // Edit buttons
            html += '<div class="flex flex-wrap gap-2">';
            html += '<button onclick="showStep(1)" class="px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300">Edit Basic Details</button>';
            html += '<button onclick="showStep(2)" class="px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300">Edit Venue & Bands</button>';
            html += '<button onclick="showStep(3)" class="px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300">Edit Extras</button>';
            html += '<button onclick="showStep(4)" class="px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300">Edit Date</button>';
            html += '<button onclick="showStep(5)" class="px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300">Edit Ticketing</button>';
            html += '</div>';

            summaryContent.innerHTML = html;

            // Update payment amounts
            document.getElementById('fullAmount').textContent = '₹' + totalCost.toLocaleString();
            document.getElementById('depositAmount').textContent = '₹' + (totalCost / 2).toLocaleString();
        }

        // Payment Processing
        function processPayment() {
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');
            const paymentAmount = document.querySelector('input[name="paymentAmount"]:checked');

            if (!paymentMethod) {
                showError('paymentMethod', 'Please select a payment method');
                return false;
            } else {
                clearError('paymentMethod');
            }

            // Calculate total cost
            let totalCost = 0;
            if (bookingData.selectedVenue) totalCost += bookingData.selectedVenue.pricePerHour * 4;
            bookingData.selectedBands.forEach(band => totalCost += band.pricePerHour * 4);
            if (bookingData.selectedDecoration) totalCost += bookingData.selectedDecoration.pricePerEvent;
            totalCost += bookingData.snackCount * 500;

            const paymentAmountValue = paymentAmount.value === 'deposit' ? totalCost / 2 : totalCost;

            // Create final booking object
            const finalBooking = {
                bookingId: 'TCM-' + Date.now(),
                timestamp: new Date().toISOString(),
                customerInfo: bookingData.basicDetails,
                eventDetails: {
                    date: bookingData.selectedDate,
                    timeSlot: bookingData.selectedSlot,
                    venue: bookingData.selectedVenue,
                    bands: bookingData.selectedBands,
                    decoration: bookingData.selectedDecoration,
                    snackBoxes: bookingData.snackCount
                },
                ticketing: bookingData.ticketing,
                payment: {
                    method: paymentMethod.value,
                    type: paymentAmount.value,
                    amount: paymentAmountValue,
                    totalEventCost: totalCost,
                    status: 'completed'
                }
            };

            // Console log the booking
            console.log('=== THIGALZHI CONCERT BOOKING COMPLETED ===');
            console.log(JSON.stringify(finalBooking, null, 2));
            console.log('=== BOOKING SUMMARY ===');
            console.log(`Booking ID: ${finalBooking.bookingId}`);
            console.log(`Customer: ${finalBooking.customerInfo.fullName}`);
            console.log(`Event Date: ${finalBooking.eventDetails.date} (${finalBooking.eventDetails.timeSlot})`);
            console.log(`Total Cost: ₹${totalCost.toLocaleString()}`);
            console.log(`Payment: ₹${paymentAmountValue.toLocaleString()} via ${paymentMethod.value}`);
            console.log('==========================================');

            // Show success message
            alert('🎉 Payment successful! Your concert booking is confirmed.\n\nBooking ID: ' + finalBooking.bookingId + '\n\nPlease check the console for complete booking details.');

            return true;
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Step navigation
            document.getElementById('nextStep1').addEventListener('click', function() {
                if (validateStep1()) {
                    showStep(2);
                }
            });

            document.getElementById('prevStep2').addEventListener('click', () => showStep(1));
            document.getElementById('nextStep2').addEventListener('click', () => showStep(3));

            document.getElementById('prevStep3').addEventListener('click', () => showStep(2));
            document.getElementById('nextStep3').addEventListener('click', function() {
                // Update snack count
                bookingData.snackCount = parseInt(document.getElementById('snackCount').value) || 0;
                updateLiveSummary();
                showStep(4);
                renderCalendar();
            });

            document.getElementById('prevStep4').addEventListener('click', () => showStep(3));
            document.getElementById('nextStep4').addEventListener('click', () => showStep(5));

            document.getElementById('prevStep5').addEventListener('click', () => showStep(4));
            document.getElementById('nextStep5').addEventListener('click', function() {
                if (validateTicketing()) {
                    generateSummary();
                    showStep(6);
                }
            });

            document.getElementById('prevStep6').addEventListener('click', () => showStep(5));
            document.getElementById('nextStep6').addEventListener('click', () => showStep(7));

            document.getElementById('prevStep7').addEventListener('click', () => showStep(6));
            document.getElementById('submitBooking').addEventListener('click', processPayment);

            // Real-time validation
            document.getElementById('fullName').addEventListener('input', function() {
                if (this.value.trim()) clearError('fullName');
                bookingData.basicDetails.fullName = this.value.trim();
                updateLiveSummary();
            });

            document.getElementById('email').addEventListener('input', function() {
                if (validateEmail(this.value.trim())) clearError('email');
                bookingData.basicDetails.email = this.value.trim();
                updateLiveSummary();
            });

            document.getElementById('mobile').addEventListener('input', function() {
                this.value = this.value.replace(/\D/g, '');
                if (validatePhone(this.value)) clearError('mobile');
                bookingData.basicDetails.mobile = this.value;
                updateLiveSummary();
            });

            document.querySelectorAll('input[name="concertDay"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    clearError('concertDay');
                    bookingData.basicDetails.concertDay = this.value;
                    updateLiveSummary();
                });
            });

            // Venue toggle
            document.querySelectorAll('input[name="wantVenue"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const venueSection = document.getElementById('venueSection');
                    if (this.value === 'yes') {
                        venueSection.classList.remove('hidden');
                        renderVenues();
                    } else {
                        venueSection.classList.add('hidden');
                        bookingData.selectedVenue = null;
                        updateLiveSummary();
                    }
                });
            });

            // Band toggle
            document.querySelectorAll('input[name="wantBand"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const bandSection = document.getElementById('bandSection');
                    if (this.value === 'yes') {
                        bandSection.classList.remove('hidden');
                        renderBands();
                    } else {
                        bandSection.classList.add('hidden');
                        bookingData.selectedBands = [];
                        updateLiveSummary();
                    }
                });
            });

            // Decoration toggle
            document.querySelectorAll('input[name="wantDecoration"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const decorationSection = document.getElementById('decorationSection');
                    if (this.value === 'yes') {
                        decorationSection.classList.remove('hidden');
                        renderDecorations();
                    } else {
                        decorationSection.classList.add('hidden');
                        bookingData.selectedDecoration = null;
                        updateLiveSummary();
                    }
                });
            });

            // Food toggle
            document.querySelectorAll('input[name="wantFood"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const foodSection = document.getElementById('foodSection');
                    if (this.value === 'yes') {
                        foodSection.classList.remove('hidden');
                    } else {
                        foodSection.classList.add('hidden');
                        document.getElementById('snackCount').value = '';
                        bookingData.snackCount = 0;
                        updateLiveSummary();
                    }
                });
            });

            // Ticketing toggle
            document.querySelectorAll('input[name="provideTickets"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const ticketingSection = document.getElementById('ticketingSection');
                    if (this.value === 'yes') {
                        ticketingSection.classList.remove('hidden');
                    } else {
                        ticketingSection.classList.add('hidden');
                    }
                });
            });

            // Filter inputs
            ['venueMinPrice', 'venueMaxPrice', 'venueLocation', 'venueMinCapacity'].forEach(id => {
                document.getElementById(id).addEventListener('input', () => {
                    currentVenuePage = 1;
                    renderVenues();
                });
            });

            ['bandMinPrice', 'bandMaxPrice', 'bandGenre', 'bandMinMembers'].forEach(id => {
                document.getElementById(id).addEventListener('change', () => {
                    currentBandPage = 1;
                    renderBands();
                });
            });

            ['decorationMinPrice', 'decorationMaxPrice', 'decorationPackage'].forEach(id => {
                document.getElementById(id).addEventListener('input', () => {
                    currentDecorationPage = 1;
                    renderDecorations();
                });
            });

            // Calendar navigation
            document.getElementById('prevMonth').addEventListener('click', function() {
                if (currentMonth === 0) {
                    currentMonth = 11;
                    currentYear--;
                } else {
                    currentMonth--;
                }
                renderCalendar();
            });

            document.getElementById('nextMonth').addEventListener('click', function() {
                if (currentMonth === 11) {
                    currentMonth = 0;
                    currentYear++;
                } else {
                    currentMonth++;
                }
                renderCalendar();
            });

            // Snack count input
            document.getElementById('snackCount').addEventListener('input', function() {
                bookingData.snackCount = parseInt(this.value) || 0;
                updateLiveSummary();
            });

            // Initial render
            updateLiveSummary();
        });
    </script>
</body>
</html>