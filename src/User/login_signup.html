<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thigalzhi® Concert Management - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Required scopes for sending emails
const SCOPES = [
    'https://www.googleapis.com/auth/gmail.send',
    'https://www.googleapis.com/auth/gmail.compose',
    'https://www.googleapis.com/auth/gmail.modify'
];

      // Tailwind config for custom purple theme
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "music-purple": {
               50:  "#ffffff", // Pure White
100: "#fafafa", // Paper White
200: "#f0f0f0", // Light Neutral
300: "#e5e5e5", // Subtle Border
400: "#cccccc", // Soft Neutral
500: "#999999", // Mid Neutral
600: "#666666", // Text Gray
700: "#333333", // Strong Gray
800: "#1a1a1a", // Deep Black
900: "#000000", // Pure Black

              },
            },
          },
        },
      };
    </script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  </head>
  <body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">
    <!-- Demo Button to Open Modal -->
    <button
      id="openModalBtn"
      class="bg-music-purple-600 hover:bg-music-purple-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors duration-200 flex items-center gap-2"
    >
      <i class="fas fa-user-circle"></i>
      Open Login/Signup
    </button>

    <!-- Modal Overlay -->
    <div
      id="modalOverlay"
      class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50  flex items-center justify-center p-4"
    >
      <!-- Modal Container -->
      <div
        id="modalContainer"
        class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-300 scale-95 opacity-1"
      >
        <!-- Modal Header -->
        <div
          class="relative bg-gradient-to-r from-music-purple-600 to-music-purple-700 rounded-t-2xl p-6 text-white"
        >
          <div class="flex justify-between items-center">
            <div class="flex items-center gap-3">
              <i class="fas fa-music text-2xl"></i>
              <h2 class="text-xl font-bold">Thigalzhi® Access</h2>
            </div>
            <button
              id="closeModalBtn"
              class="text-white hover:text-gray-200 transition-colors duration-200 text-xl"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>

          <!-- Tab Buttons -->
          <div
            class="flex mt-4 bg-white bg-opacity-20 rounded-lg p-1 space-x-1"
          >
            <button
              id="loginTab"
              class="flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 text-white bg-white bg-opacity-30"
            >
              <i class="fas fa-sign-in-alt mr-1"></i>Login
            </button>
            <button
              id="signupTab"
              class="flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 text-white hover:bg-white hover:bg-opacity-10"
            >
              <i class="fas fa-user-plus mr-1"></i>Signup
            </button>
            <button
              id="forgotTab"
              class="flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 text-white hover:bg-white hover:bg-opacity-10"
            >
              <i class="fas fa-key mr-1"></i>Reset
            </button>
          </div>
        </div>

        <!-- Modal Body -->
        <div class="p-6">
          <!-- Success/Error Message -->
          <div id="messageContainer" class="mb-4 hidden">
            <p id="messageText" class="text-center font-medium"></p>
          </div>

          <!-- Login Form -->
          <form id="loginForm" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-envelope text-music-purple-600 mr-2"></i>Email
                Address
              </label>
              <input
                type="email"
                id="loginEmail"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-music-purple-500 focus:border-music-purple-500 transition-colors duration-200"
                placeholder="your.email@example.com"
                required
              />
              <span
                id="loginEmailError"
                class="text-red-500 text-xs mt-1 hidden"
              ></span>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-lock text-music-purple-600 mr-2"></i>Password
              </label>
              <div class="relative">
                <input
                  type="password"
                  id="loginPassword"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-music-purple-500 focus:border-music-purple-500 transition-colors duration-200 pr-12"
                  placeholder="Enter your password"
                  required
                />
                <button
                  type="button"
                  id="loginPasswordToggle"
                  class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-music-purple-600"
                >
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <span
                id="loginPasswordError"
                class="text-red-500 text-xs mt-1 hidden"
              ></span>
            </div>

            <button
              type="submit"
              id="loginBtn"
              class="w-full bg-music-purple-600 hover:bg-music-purple-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors duration-200 flex items-center justify-center gap-2"
            >
              <i class="fas fa-sign-in-alt"></i>
              <span>Sign In to Thigalzhi®</span>
            </button>

            <div class="text-center">
              <button
                type="button"
                id="switchToForgot"
                class="text-sm text-music-purple-600 hover:text-music-purple-700 underline"
              >
                Forgot Password?
              </button>
            </div>
          </form>

          <!-- Signup Form -->
          <form id="signupForm" class="space-y-4 hidden">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-user text-music-purple-600 mr-2"></i>Full Name
              </label>
              <input
                type="text"
                id="signupName"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-music-purple-500 focus:border-music-purple-500 transition-colors duration-200"
                placeholder="Enter your full name"
                required
              />
              <span
                id="signupNameError"
                class="text-red-500 text-xs mt-1 hidden"
              ></span>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-envelope text-music-purple-600 mr-2"></i>Email
                Address
              </label>
              <input
                type="email"
                id="signupEmail"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-music-purple-500 focus:border-music-purple-500 transition-colors duration-200"
                placeholder="your.email@example.com"
                required
              />
              <span
                id="signupEmailError"
                class="text-red-500 text-xs mt-1 hidden"
              ></span>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-lock text-music-purple-600 mr-2"></i>Password
              </label>
              <div class="relative">
                <input
                  type="password"
                  id="signupPassword"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-music-purple-500 focus:border-music-purple-500 transition-colors duration-200 pr-12"
                  placeholder="Create a strong password"
                  required
                />
                <button
                  type="button"
                  id="signupPasswordToggle"
                  class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-music-purple-600"
                >
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <span
                id="signupPasswordError"
                class="text-red-500 text-xs mt-1 hidden"
              ></span>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-shield-alt text-music-purple-600 mr-2"></i
                >Confirm Password
              </label>
              <div class="relative">
                <input
                  type="password"
                  id="signupConfirmPassword"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-music-purple-500 focus:border-music-purple-500 transition-colors duration-200 pr-12"
                  placeholder="Confirm your password"
                  required
                />
                <button
                  type="button"
                  id="signupConfirmPasswordToggle"
                  class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-music-purple-600"
                >
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <span
                id="signupConfirmPasswordError"
                class="text-red-500 text-xs mt-1 hidden"
              ></span>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-users text-music-purple-600 mr-2"></i>Role
              </label>
              <select
                id="signupRole"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-music-purple-500 focus:border-music-purple-500 transition-colors duration-200"
                required
              >
                <option value="">Select your role</option>
                <option value="organizers">Concert Organizer</option>
                <option value="audience">Audience Member</option>
              </select>
              <span
                id="signupRoleError"
                class="text-red-500 text-xs mt-1 hidden"
              ></span>
            </div>

            <button
              type="submit"
              id="signupBtn"
              class="w-full bg-music-purple-600 hover:bg-music-purple-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors duration-200 flex items-center justify-center gap-2"
            >
              <i class="fas fa-user-plus"></i>
              <span>Join Thigalzhi® Community</span>
            </button>

            <div class="text-center text-xs text-gray-500">
              By signing up, you agree to our Terms of Service and Privacy
              Policy
            </div>
          </form>

          <!-- Forgot Password Form -->
          <form id="forgotForm" class="space-y-4 hidden">
            <div class="text-center mb-4">
              <i class="fas fa-key text-4xl text-music-purple-600 mb-3"></i>
              <h3 class="text-lg font-semibold text-gray-800 mb-2">
                Reset Your Password
              </h3>
              <p class="text-sm text-gray-600">
                Enter your email address and we'll send you instructions to
                reset your password.
              </p>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-envelope text-music-purple-600 mr-2"></i>Email
                Address
              </label>
              <input
                type="email"
                id="forgotEmail"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-music-purple-500 focus:border-music-purple-500 transition-colors duration-200"
                placeholder="Enter your registered email"
                required
              />
              <span
                id="forgotEmailError"
                class="text-red-500 text-xs mt-1 hidden"
              ></span>
            </div>

            <button
              type="submit"
              id="forgotBtn"
              class="w-full bg-music-purple-600 hover:bg-music-purple-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors duration-200 flex items-center justify-center gap-2"
            >
              <i class="fas fa-paper-plane"></i>
              <span>Send Reset Instructions</span>
            </button>

            <div class="text-center">
              <button
                type="button"
                id="backToLogin"
                class="text-sm text-music-purple-600 hover:text-music-purple-700 underline"
              >
                Back to Login
              </button>
            </div>

            <!-- Success Message (hidden by default) -->
            <div
              id="resetSuccessMessage"
              class="hidden bg-green-50 border border-green-200 rounded-lg p-4 text-center"
            >
              <i class="fas fa-check-circle text-green-600 text-xl mb-2"></i>
              <p class="text-green-800 font-medium mb-1">Reset Link Sent!</p>
              <p class="text-green-700 text-sm">
                Check your email for password reset instructions. The link will
                expire in 24 hours.
              </p>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      // API Configuration
      const API_URL =
        "https://68ca895b430c4476c349e4c0.mockapi.io/MusicEvent/EventData/2";

      /* -------------------
         DOM Elements
      ------------------- */
      const overlay = document.getElementById("modalOverlay");
      const container = document.getElementById("modalContainer");
      const messageContainer = document.getElementById("messageContainer");
      const messageText = document.getElementById("messageText");

      const openBtn = document.getElementById("openModalBtn");
      const closeBtn = document.getElementById("closeModalBtn");

      const loginTab = document.getElementById("loginTab");
      const signupTab = document.getElementById("signupTab");
      const forgotTab = document.getElementById("forgotTab");

      const switchToForgot = document.getElementById("switchToForgot");
      const backToLogin = document.getElementById("backToLogin");

      const loginForm = document.getElementById("loginForm");
      const signupForm = document.getElementById("signupForm");
      const forgotForm = document.getElementById("forgotForm");

      let currentForm = "login";

      /* -------------------
         API Functions
      ------------------- */

      // Fetch data from API
      async function fetchAPIData() {
        try {
          const response = await fetch(API_URL);
          if (!response.ok) {
            throw new Error("Failed to fetch data");
          }
          return await response.json();
        } catch (error) {
          console.error("Error fetching data:", error);
          showMessage("Error connecting to server. Please try again.", "error");
          return null;
        }
      }

      // Update data in API
      async function updateAPIData(data) {
        try {
          const response = await fetch(API_URL, {
            method: "PUT",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });
          if (!response.ok) {
            throw new Error("Failed to update data");
          }
          return await response.json();
        } catch (error) {
          console.error("Error updating data:", error);
          showMessage("Error saving data. Please try again.", "error");
          return null;
        }
      }

      // Check if email exists in a specific role array
      function emailExists(users, email) {
        return users.some(
          (user) => user.email.toLowerCase() === email.toLowerCase()
        );
      }

      // Find user by email and password in both arrays
      function findUser(data, email, password) {
        const organizers = data.Organizers || [];
        const audience = data.Audience || [];

        // Check in Organizers array
        let user = organizers.find(
          (user) =>
            user.email.toLowerCase() === email.toLowerCase() &&
            user.password === password
        );

        if (user) {
          return { user, role: "organizer" };
        }

        // Check in Audience array
        user = audience.find(
          (user) =>
            user.email.toLowerCase() === email.toLowerCase() &&
            user.password === password
        );

        if (user) {
          return { user, role: "audience" };
        }

        return null;
      }

      /* -------------------
         Message Display
      ------------------- */
      function showMessage(message, type = "success") {
        messageText.textContent = message;
        messageContainer.className = `mb-4 p-3 rounded-lg text-center ${
          type === "success"
            ? "bg-green-50 border border-green-200 text-green-800"
            : "bg-red-50 border border-red-200 text-red-800"
        }`;
        messageContainer.classList.remove("hidden");

        // Auto-hide after 5 seconds
        setTimeout(() => {
          messageContainer.classList.add("hidden");
        }, 5000);
      }

      function hideMessage() {
        messageContainer.classList.add("hidden");
      }

      /* -------------------
         Modal Functions
      ------------------- */
      function openModal() {
        overlay.classList.remove("hidden");
        hideMessage(); // Clear any previous messages
        setTimeout(() => {
          container.classList.remove("scale-95", "opacity-0");
          container.classList.add("scale-100", "opacity-100");
        }, 10);
        focusFirstInput();
      }

      function closeModal() {
        container.classList.remove("scale-100", "opacity-100");
        container.classList.add("scale-95", "opacity-0");
        setTimeout(() => {
          overlay.classList.add("hidden");
        }, 300);
      }

      /* -------------------
         Tab Switching Functions
      ------------------- */
      function showForm(type) {
        loginForm.classList.add("hidden");
        signupForm.classList.add("hidden");
        forgotForm.classList.add("hidden");
        hideMessage(); // Clear messages when switching forms
        if (type === "login") loginForm.classList.remove("hidden");
        if (type === "signup") signupForm.classList.remove("hidden");
        if (type === "forgot") forgotForm.classList.remove("hidden");
      }

      function updateTabStyles(active) {
        [loginTab, signupTab, forgotTab].forEach((tab) =>
          tab.classList.remove("bg-white", "bg-opacity-30")
        );
        if (active === "login")
          loginTab.classList.add("bg-white", "bg-opacity-30");
        if (active === "signup")
          signupTab.classList.add("bg-white", "bg-opacity-30");
        if (active === "forgot")
          forgotTab.classList.add("bg-white", "bg-opacity-30");
      }

      function switchToLogin() {
        currentForm = "login";
        showForm("login");
        updateTabStyles("login");
        // focusFirstInput();
      }

      function switchToSignup() {
        currentForm = "signup";
        showForm("signup");
        updateTabStyles("signup");
        // focusFirstInput();
      }

      function switchToForgotForm() {
        currentForm = "forgot";
        showForm("forgot");
        updateTabStyles("forgot");
        // focusFirstInput();
      }

      /* -------------------
         Validation Functions
      ------------------- */
      function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      function showError(fieldId, message) {
        const input = document.getElementById(fieldId);
        const error = document.getElementById(fieldId + "Error");
        error.textContent = message;
        error.classList.remove("hidden");
        input.classList.add("border-red-500");
      }

      function hideError(fieldId) {
        const input = document.getElementById(fieldId);
        const error = document.getElementById(fieldId + "Error");
        error.classList.add("hidden");
        input.classList.remove("border-red-500");
      }

      // Real-time validation
      document.querySelectorAll("input, select").forEach((el) => {
        el.addEventListener("blur", () => validateField(el.id));
        el.addEventListener("input", () => validateField(el.id));
      });

      function validateField(id) {
        const value = document.getElementById(id).value.trim();
        let error = "";

        switch (id) {
          /* ---------- LOGIN ---------- */
          case "loginEmail":
            if (!value) error = "Email is required.";
            else if (!isValidEmail(value)) error = "Invalid email format.";
            break;
          case "loginPassword":
            if (!value) error = "Password is required.";
            break;

          /* ---------- SIGNUP ---------- */
          case "signupName":
            if (!value) error = "Full name is required.";
            break;
          case "signupEmail":
            if (!value) error = "Email is required.";
            else if (!isValidEmail(value)) error = "Invalid email format.";
            break;
          case "signupPassword":
            if (!value) error = "Password is required.";
            else if (value.length < 6)
              error = "Password must be at least 6 characters.";
            break;
          case "signupConfirmPassword":
            const pwd = document.getElementById("signupPassword").value;
            if (!value) error = "Please confirm your password.";
            else if (value !== pwd) error = "Passwords do not match.";
            break;
          case "signupRole":
            if (!value) error = "Please select a role.";
            break;

          /* ---------- FORGOT ---------- */
          case "forgotEmail":
            if (!value) error = "Email is required.";
            else if (!isValidEmail(value)) error = "Invalid email format.";
            break;
        }

        if (error) showError(id, error);
        else hideError(id);
      }

      /* -------------------
         Loading Functions
      ------------------- */
      function disableButtonWithLoading(btnId, loadingText) {
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.disabled = true;
          btn.innerHTML = `<i class='fas fa-spinner fa-spin mr-2'></i> ${loadingText}`;
        }
      }

      function resetButton(btnId, originalHtml) {
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.disabled = false;
          btn.innerHTML = originalHtml;
        }
      }

      /* -------------------
         Form Submission with API Integration
      ------------------- */

      // Login Form
      loginForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Validate fields
        validateField("loginEmail");
        validateField("loginPassword");

        // Check if there are validation errors
        if (
          !document
            .getElementById("loginEmailError")
            .classList.contains("hidden") ||
          !document
            .getElementById("loginPasswordError")
            .classList.contains("hidden")
        ) {
          return;
        }

        const email = document.getElementById("loginEmail").value.trim();
        const password = document.getElementById("loginPassword").value;

        // Show loading state
        disableButtonWithLoading("loginBtn", "Signing In...");

        // Fetch data and check credentials
        const data = await fetchAPIData();
        console.log(data);

        if (data) {
          const result = findUser(data, email, password);

          if (result) {
            localStorage.setItem("currentOrganizerId", result.user.id);
            localStorage.setItem("currentOrganizerName", result.user.name);
            localStorage.setItem("currentOrganizerEmail", result.user.email);

            showMessage(
              `Welcome back, ${result.user.name}! Login successful.`,
              "success"
            );
            // You can redirect to dashboard here
            console.log("User logged in:", result);
          } else {
            showMessage(
              "Invalid email or password. Please try again.",
              "error"
            );
          }
        }

        // Reset button
        resetButton(
          "loginBtn",
          `<i class='fas fa-sign-in-alt'></i> <span>Sign In to Thigalzhi®</span>`
        );
      });

      // Signup Form
      signupForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Validate all fields
        [
          "signupName",
          "signupEmail",
          "signupPassword",
          "signupConfirmPassword",
          "signupRole",
        ].forEach(validateField);

        // Check if there are validation errors
        if (
          !document
            .getElementById("signupNameError")
            .classList.contains("hidden") ||
          !document
            .getElementById("signupEmailError")
            .classList.contains("hidden") ||
          !document
            .getElementById("signupPasswordError")
            .classList.contains("hidden") ||
          !document
            .getElementById("signupConfirmPasswordError")
            .classList.contains("hidden") ||
          !document
            .getElementById("signupRoleError")
            .classList.contains("hidden")
        ) {
          return;
        }

        const name = document.getElementById("signupName").value.trim();
        const email = document.getElementById("signupEmail").value.trim();
        const password = document.getElementById("signupPassword").value;
        const role = document.getElementById("signupRole").value;

        // Show loading state
        disableButtonWithLoading("signupBtn", "Signing Up...");

        // Fetch current data
        const data = await fetchAPIData();

        if (data) {
          // Ensure arrays exist
          if (!data.Organizers) data.Organizers = [];
          if (!data.Audience) data.Audience = [];

          // Determine which array to check and update
          const targetArray =
            role === "organizers" ? data.Organizers : data.Audience;

          // Check if email already exists in the selected role
          if (emailExists(targetArray, email)) {
            showMessage(
              `Email already exists for ${
                role === "organizers" ? "Organizer" : "Audience"
              } role.`,
              "error"
            );
          } else {
            // Create new user object
            const newUser = {
              id: Date.now().toString(), // Simple unique ID
              name: name,
              email: email,
              password: password,
            };

            // Add to appropriate array
            targetArray.push(newUser);

            // Update API
            const updated = await updateAPIData(data);

            if (updated) {
              showMessage(
                `Account created successfully! Welcome to Thigalzhi®, ${name}!\n Redirecting to Login Page...`,
                "success"
              );
              // Clear form
              setTimeout(() => {
                switchToLogin();
              }, 3000);
              signupForm.reset();

              // You can redirect to dashboard here
              console.log("New user created:", newUser);
            }
          }
        }

        // Reset button
        resetButton(
          "signupBtn",
          `<i class='fas fa-user-plus'></i> <span>Join Thigalzhi® Community</span>`
        );
      });

      // Forgot Password Form (mock functionality)
      forgotForm.addEventListener("submit", (e) => {
        e.preventDefault();
        validateField("forgotEmail");

        if (
          !document
            .getElementById("forgotEmailError")
            .classList.contains("hidden")
        ) {
          return;
        }

        disableButtonWithLoading("forgotBtn", "Sending...");

        setTimeout(() => {
          document
            .getElementById("resetSuccessMessage")
            .classList.remove("hidden");
          resetButton(
            "forgotBtn",
            `<i class='fas fa-paper-plane'></i> <span>Send Reset Instructions</span>`
          );
        }, 2000);


        emailjs.init("I6tYBX3EfLe8f1DWQ"); // Get from emailjs.com
        
        const userEmail = document.getElementById("forgotEmail").value.trim();
        console.log(userEmail)
        function sendPasswordResetEmail(userEmail) {
          const templateParams = {
            email: userEmail,
            from_name: "Thigalzhi® Support Team",
          };

          emailjs
            .send("service_b67hzma", "template_p0szdc8", templateParams)
            .then(function (response) {
              alert("Password reset email sent successfully!");
            })
            .catch(function (error) {
              alert("Failed to send email: " + error);
            });
        }
        sendPasswordResetEmail(userEmail);
      });

      /* -------------------
         Password Toggle Functions
      ------------------- */
      function togglePasswordVisibility(toggleId, inputId) {
        const toggle = document.getElementById(toggleId);
        const input = document.getElementById(inputId);
        toggle.addEventListener("click", () => {
          if (input.type === "password") {
            input.type = "text";
            toggle.innerHTML = '<i class="fas fa-eye-slash"></i>';
          } else {
            input.type = "password";
            toggle.innerHTML = '<i class="fas fa-eye"></i>';
          }
        });
      }

      togglePasswordVisibility("loginPasswordToggle", "loginPassword");
      togglePasswordVisibility("signupPasswordToggle", "signupPassword");
      togglePasswordVisibility(
        "signupConfirmPasswordToggle",
        "signupConfirmPassword"
      );

      /* -------------------
         Event Listeners
      ------------------- */
      openBtn.addEventListener("click", openModal);
      closeBtn.addEventListener("click", closeModal);

      loginTab.addEventListener("click", switchToLogin);
      signupTab.addEventListener("click", switchToSignup);
      forgotTab.addEventListener("click", switchToForgotForm);

      switchToForgot.addEventListener("click", switchToForgotForm);
      backToLogin.addEventListener("click", switchToLogin);

      function focusFirstInput() {
        if (currentForm === "login")
          document.getElementById("loginEmail").focus();
        if (currentForm === "signup")
          document.getElementById("signupName").focus();
        if (currentForm === "forgot")
          document.getElementById("forgotEmail").focus();
      }

      // Close modal when clicking outside
      overlay.addEventListener("click", (e) => {
        if (e.target === overlay) {
          closeModal();
        }
      });
    </script>
  </body>
</html>

<!-- Add this to your HTML head -->

<script>
  // Initialize EmailJS
</script>



